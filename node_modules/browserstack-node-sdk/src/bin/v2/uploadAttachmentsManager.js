const a82_0xbda3fa=a82_0x33da;(function(_0x16d29d,_0x203461){const _0x9d5102=a82_0x33da,_0x115d98=_0x16d29d();while(!![]){try{const _0xe6625d=parseInt(_0x9d5102(0x241))/0x1+-parseInt(_0x9d5102(0x237))/0x2+parseInt(_0x9d5102(0x1e3))/0x3*(-parseInt(_0x9d5102(0x247))/0x4)+-parseInt(_0x9d5102(0x1f5))/0x5*(-parseInt(_0x9d5102(0x226))/0x6)+-parseInt(_0x9d5102(0x223))/0x7*(parseInt(_0x9d5102(0x1ed))/0x8)+parseInt(_0x9d5102(0x1e8))/0x9*(parseInt(_0x9d5102(0x1e6))/0xa)+parseInt(_0x9d5102(0x203))/0xb;if(_0xe6625d===_0x203461)break;else _0x115d98['push'](_0x115d98['shift']());}catch(_0x5d26b4){_0x115d98['push'](_0x115d98['shift']());}}}(a82_0x337c,0xea1d3));const os=require('os'),fs=require('fs'),path=require(a82_0xbda3fa(0x211)),util=require(a82_0xbda3fa(0x248)),BrowserstackCLI=require(a82_0xbda3fa(0x23c)),https=require(a82_0xbda3fa(0x1f3)),http=require(a82_0xbda3fa(0x227)),AutomationFramework=require(a82_0xbda3fa(0x20b)),PlaywrightDriverModule=require(a82_0xbda3fa(0x213)),TestInfo=require('./TestInfo'),TestFrameworkConstants=require(a82_0xbda3fa(0x23b)),{createClassLogger}=require(a82_0xbda3fa(0x210));class uploadAttachmentsManager{static ['logger']=createClassLogger(a82_0xbda3fa(0x207));static[a82_0xbda3fa(0x246)](_0x234210,_0x35f657=![]){const _0x5d69e5=a82_0xbda3fa,_0x21b7e5={};_0x21b7e5[_0x5d69e5(0x20e)]=function(_0x16c4dc,_0x242a09){return _0x16c4dc/_0x242a09;},_0x21b7e5[_0x5d69e5(0x20c)]=function(_0x12d3d4,_0x5124d4){return _0x12d3d4*_0x5124d4;},_0x21b7e5[_0x5d69e5(0x231)]=function(_0x31afe1,_0x3e94f2){return _0x31afe1>_0x3e94f2;},_0x21b7e5[_0x5d69e5(0x1ff)]=_0x5d69e5(0x22a),_0x21b7e5[_0x5d69e5(0x1fa)]=_0x5d69e5(0x205),_0x21b7e5['REMbh']=function(_0x4d3466,_0x5633f3){return _0x4d3466===_0x5633f3;},_0x21b7e5[_0x5d69e5(0x204)]='finish',_0x21b7e5[_0x5d69e5(0x238)]=_0x5d69e5(0x1e7),_0x21b7e5[_0x5d69e5(0x1ee)]=_0x5d69e5(0x22c),_0x21b7e5[_0x5d69e5(0x230)]='Attachment\x20recevied\x20for\x20path:\x20%s',_0x21b7e5['FetwU']=_0x5d69e5(0x225),_0x21b7e5[_0x5d69e5(0x217)]='.browserstack\x20folder\x20not\x20found\x20at:\x20%s',_0x21b7e5[_0x5d69e5(0x23d)]='Created\x20.browserstack\x20folder\x20at:\x20%s',_0x21b7e5[_0x5d69e5(0x20d)]='Created\x20folder:\x20%s',_0x21b7e5[_0x5d69e5(0x235)]=function(_0x3814ff,_0x4cb5ab){return _0x3814ff===_0x4cb5ab;},_0x21b7e5[_0x5d69e5(0x24b)]='Attachment\x20file\x20path\x20is\x20empty,\x20skipping\x20upload.',_0x21b7e5[_0x5d69e5(0x1f1)]=_0x5d69e5(0x1e4),_0x21b7e5[_0x5d69e5(0x21a)]=_0x5d69e5(0x234),_0x21b7e5[_0x5d69e5(0x22b)]=_0x5d69e5(0x201),_0x21b7e5[_0x5d69e5(0x244)]=_0x5d69e5(0x245),_0x21b7e5['DmKxs']=function(_0x3fc7f9,_0xbf8d4c){return _0x3fc7f9/_0xbf8d4c;},_0x21b7e5[_0x5d69e5(0x21e)]='File\x20size\x20is\x20too\x20large\x20(%s\x20MB).\x20Skipping\x20upload.';const _0xbbc298=_0x21b7e5;this[_0x5d69e5(0x1e2)][_0x5d69e5(0x208)](util['format'](_0xbbc298['pdZsA'],_0x234210));const _0x14a781=os[_0x5d69e5(0x23a)](),_0x3e9dc0=path[_0x5d69e5(0x20a)](_0x14a781,_0xbbc298['FetwU']);!fs[_0x5d69e5(0x1ef)](_0x3e9dc0)&&(this[_0x5d69e5(0x1e2)]['debug'](util[_0x5d69e5(0x22f)](_0xbbc298['jgWRw'],_0x3e9dc0)),fs[_0x5d69e5(0x202)](_0x3e9dc0),this[_0x5d69e5(0x1e2)][_0x5d69e5(0x208)](util[_0x5d69e5(0x22f)](_0xbbc298[_0x5d69e5(0x23d)],_0x3e9dc0)));const _0x366295=BrowserstackCLI[_0x5d69e5(0x228)]()[_0x5d69e5(0x1f9)]['TestHubModule']?.[_0x5d69e5(0x23f)]?.[_0x5d69e5(0x1ea)]()?.[_0x5d69e5(0x236)],_0x4ec7fb=path[_0x5d69e5(0x20a)](_0x3e9dc0,_0x366295);!fs['existsSync'](_0x4ec7fb)&&(fs[_0x5d69e5(0x202)](_0x4ec7fb),this['logger']['debug'](util[_0x5d69e5(0x22f)](_0xbbc298['IYMKM'],_0x4ec7fb)));if(_0xbbc298[_0x5d69e5(0x235)](_0x234210[_0x5d69e5(0x242)](),'')){this['logger'][_0x5d69e5(0x208)](util['format'](_0xbbc298[_0x5d69e5(0x24b)]));return;}if(_0x234210['startsWith'](_0xbbc298[_0x5d69e5(0x1f1)])||_0x234210[_0x5d69e5(0x221)](_0xbbc298['wtGEI'])){const _0x3056f0=_0x234210[_0x5d69e5(0x221)](_0xbbc298[_0x5d69e5(0x1f1)])?https:http,_0x4d0a1c=path[_0x5d69e5(0x1f8)](_0x234210),_0x418898=path[_0x5d69e5(0x20a)](_0x4ec7fb,_0x4d0a1c),_0x4bc892=fs[_0x5d69e5(0x1eb)](_0x418898);_0x3056f0[_0x5d69e5(0x1fe)](_0x234210,_0x9c9f04=>{const _0x24760c=_0x5d69e5;if(_0xbbc298[_0x24760c(0x233)](_0x9c9f04[_0x24760c(0x20f)],0xc8))_0x9c9f04[_0x24760c(0x215)](_0x4bc892),_0x4bc892['on'](_0xbbc298['tsjgO'],()=>{const _0x25c7b9=_0x24760c;_0x4bc892[_0x25c7b9(0x1e9)]();const _0x50a157=fs[_0x25c7b9(0x216)](_0x418898),_0xdf893f=_0xbbc298[_0x25c7b9(0x20e)](_0x50a157[_0x25c7b9(0x219)],_0xbbc298[_0x25c7b9(0x20c)](0x400,0x400));if(_0xbbc298[_0x25c7b9(0x231)](_0xdf893f,0x64)){this[_0x25c7b9(0x1e2)][_0x25c7b9(0x208)](util[_0x25c7b9(0x22f)](_0xbbc298[_0x25c7b9(0x1ff)],_0xdf893f['toFixed'](0x2))),fs[_0x25c7b9(0x232)](_0x418898);return;}this['logger'][_0x25c7b9(0x208)](util[_0x25c7b9(0x22f)](_0xbbc298[_0x25c7b9(0x1fa)],_0x418898)),uploadAttachmentsManager['trackFile'](_0x418898,_0x35f657);});else{this['logger']['debug'](util[_0x24760c(0x22f)](_0xbbc298[_0x24760c(0x238)],_0x9c9f04['statusCode'])),_0x4bc892[_0x24760c(0x1e9)](),fs[_0x24760c(0x232)](_0x418898);return;}})['on'](_0xbbc298[_0x5d69e5(0x22b)],_0x4c0db5=>{const _0x25afee=_0x5d69e5;this[_0x25afee(0x1e2)][_0x25afee(0x208)](util[_0x25afee(0x22f)](_0xbbc298[_0x25afee(0x1ee)],_0x4c0db5[_0x25afee(0x224)])),_0x4bc892[_0x25afee(0x1e9)](),fs[_0x25afee(0x232)](_0x418898);return;});}else{if(!fs['existsSync'](_0x234210)){this[_0x5d69e5(0x1e2)][_0x5d69e5(0x208)](util[_0x5d69e5(0x22f)](_0xbbc298[_0x5d69e5(0x244)],_0x234210));return;}const _0x3c78fa=fs['statSync'](_0x234210),_0x4b76a6=_0xbbc298[_0x5d69e5(0x21d)](_0x3c78fa[_0x5d69e5(0x219)],_0xbbc298['sdRZV'](0x400,0x400));if(_0xbbc298[_0x5d69e5(0x231)](_0x4b76a6,0x64)){this['logger']['debug'](util[_0x5d69e5(0x22f)](_0xbbc298[_0x5d69e5(0x21e)],_0x4b76a6[_0x5d69e5(0x21b)](0x2)));return;}const _0x38fa2a=path[_0x5d69e5(0x1f8)](_0x234210),_0xd17c4c=path[_0x5d69e5(0x20a)](_0x4ec7fb,_0x38fa2a);fs[_0x5d69e5(0x1ec)](_0x234210,_0xd17c4c),uploadAttachmentsManager['trackFile'](_0xd17c4c,_0x35f657);}}static[a82_0xbda3fa(0x220)](_0x451403,_0x37d2ce){const _0x281c58=a82_0xbda3fa,_0x2b4d6e={};_0x2b4d6e[_0x281c58(0x222)]=_0x281c58(0x1fb),_0x2b4d6e[_0x281c58(0x240)]=_0x281c58(0x200),_0x2b4d6e[_0x281c58(0x1f7)]=_0x281c58(0x209),_0x2b4d6e[_0x281c58(0x22d)]=_0x281c58(0x212);const _0x3626d1=_0x2b4d6e;try{const _0x113454=global['__workerDetails']?.[_0x281c58(0x1f6)]?.[_0x281c58(0x1e5)],_0x16f16c=TestInfo[_0x281c58(0x24a)](_0x113454,_0x113454?.['retry']),_0x59617d=TestInfo[_0x281c58(0x243)](_0x16f16c),_0x3e600c=_0x59617d[TestFrameworkConstants[_0x281c58(0x23e)]]||{};_0x3e600c[_0x451403]={[TestFrameworkConstants[_0x281c58(0x249)]]:fs['statSync'](_0x451403)['size'],[TestFrameworkConstants[_0x281c58(0x218)]]:path['basename'](_0x451403),[TestFrameworkConstants[_0x281c58(0x21f)]]:_0x451403,[TestFrameworkConstants[_0x281c58(0x21c)]]:_0x37d2ce?_0x3626d1[_0x281c58(0x222)]:_0x3626d1[_0x281c58(0x240)]},_0x59617d[TestFrameworkConstants[_0x281c58(0x23e)]]=_0x3e600c,TestInfo[_0x281c58(0x1f2)](_0x16f16c,_0x59617d),this[_0x281c58(0x1e2)][_0x281c58(0x208)](util[_0x281c58(0x22f)](_0x3626d1['odish'],_0x451403));}catch(_0x33d93f){this['logger'][_0x281c58(0x208)](util['format'](_0x3626d1['YkuLU'],_0x33d93f[_0x281c58(0x224)]));}}static[a82_0xbda3fa(0x1fc)](){const _0x418bed=a82_0xbda3fa,_0x43d166={};_0x43d166[_0x418bed(0x206)]=_0x418bed(0x225),_0x43d166[_0x418bed(0x1f4)]=_0x418bed(0x214),_0x43d166[_0x418bed(0x1fd)]='Cleared\x20attachment\x20folder';const _0x3a5684=_0x43d166,_0x1304a5=os[_0x418bed(0x23a)](),_0x5dff48=path['join'](_0x1304a5,_0x3a5684[_0x418bed(0x206)]);if(!fs['existsSync'](_0x5dff48))return;const _0x3fa251=BrowserstackCLI[_0x418bed(0x228)]()[_0x418bed(0x1f9)][_0x418bed(0x239)]?.['testhubConfig']?.[_0x418bed(0x1ea)]()?.[_0x418bed(0x236)],_0xe5302d=_0x3fa251?path[_0x418bed(0x20a)](_0x5dff48,_0x3fa251):null;if(!_0xe5302d||!fs[_0x418bed(0x1ef)](_0xe5302d)){this[_0x418bed(0x1e2)][_0x418bed(0x208)](util['format'](_0x3a5684[_0x418bed(0x1f4)],_0x3fa251));return;}const _0x474f68={};_0x474f68['recursive']=!![],_0x474f68[_0x418bed(0x229)]=!![],fs[_0x418bed(0x1f0)](_0xe5302d,_0x474f68),this['logger']['debug'](util[_0x418bed(0x22f)](_0x3a5684['wmdMi']));}}function a82_0x33da(_0x59806b,_0x45e973){const _0x337cba=a82_0x337c();return a82_0x33da=function(_0x33dad2,_0x4f19aa){_0x33dad2=_0x33dad2-0x1e2;let _0xbeaec8=_0x337cba[_0x33dad2];return _0xbeaec8;},a82_0x33da(_0x59806b,_0x45e973);}function a82_0x337c(){const _0x77dee4=['statSync','jgWRw','KEY_FILE_NAME','size','wtGEI','toFixed','KEY_FILE_LEVEL','DmKxs','MbdVc','KEY_FILE_PATH','trackFile','startsWith','wtbly','7AwPsHQ','message','.browserstack','30JTjiCk','http','getInstance','force','Downloaded\x20file\x20is\x20too\x20large\x20(%s\x20MB).\x20Deleting\x20file\x20and\x20skipping\x20upload.','HEVrC','Error\x20downloading\x20file:\x20%s,\x20skipping\x20upload','YkuLU','exports','format','pdZsA','JZLfK','unlinkSync','REMbh','http://','OKybR','buildHashedId','3078778zPnjcc','nRQJJ','TestHubModule','homedir','./framework/constants/testFrameworkConstants','./browserstackCLI','bvpNr','KEY_TEST_ATTACHMENTS','testhubConfig','oQYAB','1152249pLXYfr','trim','getTestDetails','MiTIK','Attachment\x20file\x20does\x20not\x20exist\x20at:\x20%s','uploadAttachments','4756hBDiPf','util','KEY_FILE_SIZE','getTestIdentifierFromTestInfo','bWASf','logger','3981TXKvmi','https://','testInfo','6389710QGoQEV','Failed\x20to\x20download\x20file.\x20Status\x20code:\x20%s,\x20skipping\x20upload','9IHBHMV','close','toObject','createWriteStream','copyFileSync','7433872LIBIoq','IXYLc','existsSync','rmSync','iDDqf','setTestDetails','https','eMSCq','1230955tnePSP','currentTest','odish','basename','modules','JCIWJ','BuildLevel','clearAttachments','wmdMi','get','vUSMZ','TestLevel','error','mkdirSync','21815002ZMDVWA','tsjgO','File\x20downloaded\x20to:\x20%s','NtQjW','uploadAttachmentsManager','debug','Attachment\x20file\x20tracked\x20for\x20upload:\x20%s','join','./framework/automationFramework','sdRZV','IYMKM','xmwZE','statusCode','../../helpers/classLogger.js','path','Error\x20tracking\x20file:\x20%s,\x20skipping\x20upload','./modules/playwrightDriverModule','No\x20attachment\x20folder\x20found\x20for\x20testhubID:\x20%s','pipe'];a82_0x337c=function(){return _0x77dee4;};return a82_0x337c();}module[a82_0xbda3fa(0x22e)]=uploadAttachmentsManager;