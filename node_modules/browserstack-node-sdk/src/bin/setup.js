#!/usr/bin/env node

const a50_0x568b30=a50_0x8526;(function(_0x12d617,_0x556cd5){const _0x44f198=a50_0x8526,_0x5ab248=_0x12d617();while(!![]){try{const _0x31137e=-parseInt(_0x44f198(0xf5))/0x1*(parseInt(_0x44f198(0xf0))/0x2)+parseInt(_0x44f198(0xef))/0x3*(-parseInt(_0x44f198(0xfd))/0x4)+-parseInt(_0x44f198(0xf2))/0x5+parseInt(_0x44f198(0x12f))/0x6+parseInt(_0x44f198(0xf4))/0x7*(-parseInt(_0x44f198(0x10c))/0x8)+parseInt(_0x44f198(0x129))/0x9*(-parseInt(_0x44f198(0x11f))/0xa)+parseInt(_0x44f198(0x124))/0xb;if(_0x31137e===_0x556cd5)break;else _0x5ab248['push'](_0x5ab248['shift']());}catch(_0x376ebd){_0x5ab248['push'](_0x5ab248['shift']());}}}(a50_0x35cc,0xf2d46));const fs=require('fs'),helper=require(a50_0x568b30(0x102)),utilities=require(a50_0x568b30(0xf1)),yaml=require(a50_0x568b30(0xf7)),yargs=require(a50_0x568b30(0x132)),logger=require(a50_0x568b30(0x108))[a50_0x568b30(0xfa)],configFileTemplate=__dirname+a50_0x568b30(0x103),configFileTemplatePW=__dirname+a50_0x568b30(0x137),configFile=process[a50_0x568b30(0x123)]()+'/browserstack.yml',packageFile=process[a50_0x568b30(0x123)]()+a50_0x568b30(0x12e),frameworks=['mocha',a50_0x568b30(0xec),a50_0x568b30(0x10a),a50_0x568b30(0x12d),a50_0x568b30(0xfb),'codeceptjs','playwright'];function a50_0x8526(_0xb25377,_0x235c95){const _0x35cc1f=a50_0x35cc();return a50_0x8526=function(_0x8526fb,_0x64b0f0){_0x8526fb=_0x8526fb-0xeb;let _0x2c1fcf=_0x35cc1f[_0x8526fb];return _0x2c1fcf;},a50_0x8526(_0xb25377,_0x235c95);}let config;logger[a50_0x568b30(0x126)](a50_0x568b30(0x12a)),createConfigurationFile(yargs[a50_0x568b30(0x114)][a50_0x568b30(0x10d)],yargs[a50_0x568b30(0x114)]['key'],yargs[a50_0x568b30(0x114)][a50_0x568b30(0x104)]);try{sdkSetup();}catch(a50_0x23293a){logger[a50_0x568b30(0x127)](a50_0x568b30(0x130)+a50_0x23293a);}addScriptInPackageJson();function createConfigurationFile(_0x4e7308,_0x531139,_0x53a8c2=![]){const _0x17d399=a50_0x568b30,_0x1a2740={};_0x1a2740[_0x17d399(0x121)]='utf8',_0x1a2740[_0x17d399(0x111)]=_0x17d399(0x11e),_0x1a2740[_0x17d399(0x109)]=_0x17d399(0x120);const _0x53c2c3=_0x1a2740;try{let _0x26c931=fs[_0x17d399(0x113)](_0x53a8c2?configFileTemplatePW:configFileTemplate,_0x53c2c3[_0x17d399(0x121)]);_0x4e7308&&(_0x26c931=_0x26c931['replace'](_0x53c2c3[_0x17d399(0x111)],_0x4e7308)),_0x531139&&(_0x26c931=_0x26c931[_0x17d399(0x11a)](_0x53c2c3[_0x17d399(0x109)],_0x531139)),config=yaml[_0x17d399(0x122)](_0x26c931),fs[_0x17d399(0x136)](configFile,_0x26c931,_0x12f0dd=>{const _0x3cb35e=_0x17d399;_0x12f0dd&&logger[_0x3cb35e(0xff)](_0x12f0dd);});}catch(_0x7dd3a8){logger[_0x17d399(0xff)](_0x7dd3a8);}}function addPostInstallScript(_0x57dc16,_0x415ad0){const _0x214278=a50_0x568b30,_0x1a2d33={};_0x1a2d33[_0x214278(0x131)]=_0x214278(0x10b),_0x1a2d33['Ddysg']=_0x214278(0x12b),_0x1a2d33[_0x214278(0xed)]=_0x214278(0xee);const _0x3087ed=_0x1a2d33;let _0x2a4645=_0x57dc16[_0x3087ed[_0x214278(0x131)]];if(_0x2a4645&&_0x2a4645[_0x214278(0xfc)](_0x3087ed[_0x214278(0xf8)]))return;!_0x2a4645?_0x2a4645=_0x3087ed[_0x214278(0xf8)]:_0x2a4645+=_0x3087ed[_0x214278(0xed)],_0x415ad0[_0x214278(0x128)]([_0x3087ed[_0x214278(0x131)],_0x2a4645]);}function addScriptInPackageJson(){const _0x5504e1=a50_0x568b30,_0x2442f8={'opzYl':'utf8','ddhlw':function(_0x2bdb66,_0x22a053){return _0x2bdb66<_0x22a053;},'hTCeu':function(_0xa61cd,_0x242544,_0x5cd751){return _0xa61cd(_0x242544,_0x5cd751);},'fRFnr':function(_0xf58c52,_0x3d84a7){return _0xf58c52<_0x3d84a7;},'UgZNu':function(_0x164ce4,_0x24a0c5){return _0x164ce4<_0x24a0c5;},'auxbg':function(_0x25960a,_0x29bfa3){return _0x25960a!==_0x29bfa3;},'VkThU':_0x5504e1(0xeb)},_0x2ddb26=JSON[_0x5504e1(0xf6)](fs['readFileSync'](packageFile,_0x2442f8[_0x5504e1(0x125)])),_0x2d8465=[];for(let _0x4ac777=0x0;_0x2442f8['ddhlw'](_0x4ac777,frameworks[_0x5504e1(0x110)]);_0x4ac777+=0x1){const _0x504c92=_0x2442f8['hTCeu'](findScriptsWithFramework,_0x2ddb26[_0x5504e1(0x118)],frameworks[_0x4ac777]);for(let _0x4f5bc2=0x0;_0x2442f8[_0x5504e1(0x10f)](_0x4f5bc2,_0x504c92[_0x5504e1(0x110)]);_0x4f5bc2+=0x1){_0x2d8465[_0x5504e1(0x128)](_0x2442f8[_0x5504e1(0x106)](getUpdatedCommand,_0x2ddb26['scripts'],_0x504c92[_0x4f5bc2]));}_0x2442f8[_0x5504e1(0x106)](addPostInstallScript,_0x2ddb26[_0x5504e1(0x118)],_0x2d8465);}const _0x5e3904={..._0x2ddb26[_0x5504e1(0x118)]},_0x1d1c60=_0x5e3904;for(let _0x57043d=0x0;_0x2442f8[_0x5504e1(0x117)](_0x57043d,_0x2d8465[_0x5504e1(0x110)]);_0x57043d+=0x1){_0x1d1c60[_0x2d8465[_0x57043d][0x0]]=_0x2d8465[_0x57043d][0x1];}_0x2442f8[_0x5504e1(0x133)](JSON[_0x5504e1(0x134)](_0x2ddb26[_0x5504e1(0x118)]),JSON[_0x5504e1(0x134)](_0x1d1c60))&&(logger['info'](_0x2442f8[_0x5504e1(0x12c)]),_0x2ddb26[_0x5504e1(0x118)]=_0x1d1c60,fs[_0x5504e1(0x136)](packageFile,JSON[_0x5504e1(0x134)](_0x2ddb26,null,0x2),_0x5f3df8=>{_0x5f3df8&&logger['error'](_0x5f3df8);}));}function a50_0x35cc(){const _0x2602d6=['hTCeu','splice','../helpers/logger','iWGJn','cucumber-js','postinstall','434200jRtgUB','username','join','fRFnr','length','XvLVe','SDKSetup','readFileSync','argv','source','indexOf','UgZNu','scripts','zowrH','replace','wdqDE','JJgbo','Setup\x20completed','YOUR_USERNAME','7600XmWoZY','YOUR_ACCESS_KEY','BBEOg','load','cwd','68200000OMIQca','opzYl','info','debug','push','18621UWnWjA','Creating\x20configuration\x20file...','npm\x20update\x20browserstack-node-sdk','VkThU','node','/package.json','1975314qlNwJa','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','oUcoS','yargs','auxbg','stringify','fireFunnelTestEvent','writeFileSync','/../../browserstack.pw.yml.sample','Adding\x20new\x20script(s)\x20in\x20package.json...','jest','mgGBK','\x20&&\x20npm\x20update\x20browserstack-node-sdk','127662ulVWeD','1920350JbzGTh','../helpers/utilities','4454240aEaCHN','browserstack-node-sdk','168ncZvuM','1oKhCkP','parse','js-yaml','Ddysg','Hydya','winstonLogger','nightwatch','includes','76JXWlcM','OqKMY','error','isUndefined','aScMz','../helpers/helper','/../../browserstack.yml.sample','playwright','UCTuG'];a50_0x35cc=function(){return _0x2602d6;};return a50_0x35cc();};function findScriptsWithFramework(_0x50869f,_0x54ac41){const _0x40aaf7=a50_0x568b30,_0x3b407b={};_0x3b407b[_0x40aaf7(0x105)]=function(_0x4d2f2e,_0xdb462a){return _0x4d2f2e<_0xdb462a;},_0x3b407b['JJgbo']='browserstack-node-sdk';const _0x1a1ee0=_0x3b407b,_0x46ccf1=[],_0x22cbdb=Object['entries'](_0x50869f);for(let _0x3eaba2=0x0;_0x1a1ee0[_0x40aaf7(0x105)](_0x3eaba2,_0x22cbdb[_0x40aaf7(0x110)]);_0x3eaba2+=0x1){_0x22cbdb[_0x3eaba2][0x1][_0x40aaf7(0xfc)](_0x54ac41)&&!_0x22cbdb[_0x3eaba2][0x1][_0x40aaf7(0xfc)](_0x1a1ee0[_0x40aaf7(0x11c)])&&_0x46ccf1[_0x40aaf7(0x128)](_0x22cbdb[_0x3eaba2][0x0]);}return _0x46ccf1;}function getUpdatedCommand(_0x227eae,_0x18391f){const _0x16e46c=a50_0x568b30,_0x236b9f={};_0x236b9f['zowrH']=function(_0x121fa2,_0x10c458){return _0x121fa2!==_0x10c458;},_0x236b9f['aScMz']=_0x16e46c(0xf3),_0x236b9f[_0x16e46c(0xfe)]=function(_0x3c4e2a,_0x160e96){return _0x3c4e2a===_0x160e96;};const _0x37b899=_0x236b9f,_0x469289=_0x18391f+'-browserstack',_0x41d9de=_0x227eae[_0x18391f],_0x8c84bf=_0x41d9de['split']('\x20');for(const _0x5149dd of frameworks){if(_0x37b899[_0x16e46c(0x119)](_0x8c84bf['indexOf'](_0x5149dd),-0x1)){_0x8c84bf[_0x16e46c(0x107)](_0x8c84bf[_0x16e46c(0x116)](_0x5149dd),0x0,_0x37b899[_0x16e46c(0x101)]);break;}}let _0x173c66=_0x8c84bf[_0x16e46c(0x10e)]('\x20');return _0x37b899['OqKMY'](_0x173c66,_0x41d9de)&&(_0x173c66='browserstack-node-sdk\x20'+_0x41d9de),[_0x469289,_0x173c66];}function sdkSetup(){const _0x1c40b6=a50_0x568b30,_0x48c56f={};_0x48c56f[_0x1c40b6(0x11b)]='node-setup',_0x48c56f[_0x1c40b6(0xf9)]=_0x1c40b6(0x112);const _0x28f9cb=_0x48c56f;if(helper[_0x1c40b6(0x100)](config))return;config[_0x1c40b6(0x115)]=_0x28f9cb[_0x1c40b6(0x11b)];try{utilities[_0x1c40b6(0x135)](_0x28f9cb['Hydya'],{},config,'');}catch(_0x36a357){logger[_0x1c40b6(0x127)](_0x1c40b6(0x130)+_0x36a357);}}logger[a50_0x568b30(0x126)](a50_0x568b30(0x11d));