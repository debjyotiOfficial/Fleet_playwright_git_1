#!/usr/bin/env node
'use strict';function a29_0x4987(_0x3f2a5b,_0xaf8fb3){const _0x1c2ef6=a29_0x1c2e();return a29_0x4987=function(_0x4987b9,_0x3e86dc){_0x4987b9=_0x4987b9-0xb3;let _0x3554a0=_0x1c2ef6[_0x4987b9];return _0x3554a0;},a29_0x4987(_0x3f2a5b,_0xaf8fb3);}const a29_0x54731a=a29_0x4987;(function(_0x5f1362,_0x5ae01e){const _0x142cbe=a29_0x4987,_0xafa3d7=_0x5f1362();while(!![]){try{const _0x1c9a02=parseInt(_0x142cbe(0xea))/0x1+-parseInt(_0x142cbe(0xb7))/0x2+parseInt(_0x142cbe(0xe9))/0x3+-parseInt(_0x142cbe(0xca))/0x4+parseInt(_0x142cbe(0xd9))/0x5+-parseInt(_0x142cbe(0xc7))/0x6+-parseInt(_0x142cbe(0xd6))/0x7*(parseInt(_0x142cbe(0xb6))/0x8);if(_0x1c9a02===_0x5ae01e)break;else _0xafa3d7['push'](_0xafa3d7['shift']());}catch(_0x26e76e){_0xafa3d7['push'](_0xafa3d7['shift']());}}}(a29_0x1c2e,0xa375d));const {spawn}=require('child_process'),path=require(a29_0x54731a(0xc1)),helper=require(a29_0x54731a(0xce)),CLIUtils=require(a29_0x54731a(0xc0)),{getLoadConfigPath,sleep}=require(a29_0x54731a(0xe3)),logger=require(a29_0x54731a(0xf3))[a29_0x54731a(0xc8)];async function executeLoadTest(_0x36632f){const _0x566df9=a29_0x54731a,_0x4ca427={'AZNYQ':function(_0x2d9bdf,_0x3dd631){return _0x2d9bdf(_0x3dd631);},'qLUWV':_0x566df9(0xe0),'xHVoL':_0x566df9(0xd2),'vgFyU':'Loading\x20configuration\x20using\x20environment\x20variables\x20if\x20available.','WLwfJ':function(_0x54f47f,_0x197b14){return _0x54f47f(_0x197b14);},'AROHa':function(_0x134821){return _0x134821();},'ObRDq':_0x566df9(0xd1),'lBcax':function(_0x8b1f1c){return _0x8b1f1c();},'EpLmJ':'Failed\x20to\x20determine\x20CLI\x20directory','jwiat':'CLI\x20binary\x20not\x20found,\x20downloading\x20latest\x20version','XNzfW':_0x566df9(0xd0),'VKwsk':'Failed\x20to\x20download\x20or\x20locate\x20CLI\x20binary','UnTdO':function(_0x41d457,_0x145b29,_0x489b13,_0x115221){return _0x41d457(_0x145b29,_0x489b13,_0x115221);},'WYiSI':_0x566df9(0xda),'lliAH':_0x566df9(0xc3),'uhpNc':_0x566df9(0xb8),'Mvlry':_0x566df9(0xe7),'XrBUS':_0x566df9(0xdf),'vFzPL':_0x566df9(0xed),'vMBkY':function(_0x354f37){return _0x354f37();}};try{const _0x66142f=process[_0x566df9(0xc4)][_0x566df9(0xc6)](0x2),_0x20069e=_0x66142f[_0x566df9(0xc6)](0x1);logger['debug']('Executing\x20load\x20test\x20with\x20arguments:\x20'+_0x20069e);let _0x32acd4={};try{logger[_0x566df9(0xf1)](_0x4ca427[_0x566df9(0xdd)]);const _0x2be31e={};_0x2be31e[_0x566df9(0xcd)]=process[_0x566df9(0xd7)][_0x566df9(0xbe)]||process[_0x566df9(0xd7)][_0x566df9(0xc5)],_0x2be31e[_0x566df9(0xe2)]=process[_0x566df9(0xd7)][_0x566df9(0xd4)]||process[_0x566df9(0xd7)][_0x566df9(0xbc)],_0x32acd4=_0x2be31e;if(!_0x32acd4[_0x566df9(0xcd)]||!_0x32acd4[_0x566df9(0xe2)]){const _0x54d102=_0x4ca427[_0x566df9(0xbb)](getLoadConfigPath,_0x36632f[_0x566df9(0xc4)]);logger[_0x566df9(0xf1)]('Configuration\x20path:\x20'+_0x54d102),_0x54d102&&(_0x32acd4=helper['readConfig'](_0x54d102));}}catch(_0x43d537){logger[_0x566df9(0xe5)](_0x566df9(0xcb)+_0x43d537[_0x566df9(0xe8)]),logger['debug'](_0x566df9(0xb9)+(_0x43d537['stack']||JSON['stringify'](_0x43d537))),await _0x4ca427[_0x566df9(0xbf)](sleep),process[_0x566df9(0xba)](0x1);}(!_0x32acd4[_0x566df9(0xcd)]||!_0x32acd4['accessKey'])&&(logger[_0x566df9(0xe5)](_0x4ca427['ObRDq']),await _0x4ca427['lBcax'](sleep),process['exit'](0x1));const _0x4bb6ba=CLIUtils[_0x566df9(0xe6)]();!_0x4bb6ba&&(logger[_0x566df9(0xe5)](_0x4ca427[_0x566df9(0xef)]),await _0x4ca427[_0x566df9(0xbf)](sleep),process[_0x566df9(0xba)](0x1));let _0x55ee2e=CLIUtils[_0x566df9(0xbd)](_0x4bb6ba);try{!_0x55ee2e?(logger[_0x566df9(0xf1)](_0x4ca427['jwiat']),_0x55ee2e=await CLIUtils[_0x566df9(0xf4)]('',_0x4bb6ba,_0x32acd4)):(logger['debug'](_0x4ca427[_0x566df9(0xf7)]),_0x55ee2e=await CLIUtils[_0x566df9(0xf4)](_0x55ee2e,_0x4bb6ba,_0x32acd4));}catch(_0x1ed367){logger[_0x566df9(0xe5)](_0x4ca427[_0x566df9(0xf2)]),logger[_0x566df9(0xf1)](_0x566df9(0xcc)+(_0x1ed367[_0x566df9(0xf6)]||JSON[_0x566df9(0xd8)](_0x1ed367))),await _0x4ca427['lBcax'](sleep),process[_0x566df9(0xba)](0x1);}!_0x55ee2e&&(logger[_0x566df9(0xe5)](_0x4ca427[_0x566df9(0xf2)]),logger[_0x566df9(0xf1)](_0x4ca427['VKwsk']),await _0x4ca427[_0x566df9(0xf5)](sleep),process[_0x566df9(0xba)](0x1));logger['debug'](_0x566df9(0xc2)+_0x55ee2e+'\x20load\x20'+_0x20069e[_0x566df9(0xe4)]('\x20'));const _0x205bc6=_0x4ca427['UnTdO'](spawn,_0x55ee2e,[_0x4ca427[_0x566df9(0xb5)],..._0x20069e],{'stdio':_0x4ca427[_0x566df9(0xde)]});let _0x2d1a2c=![];const _0x30baf4=new Promise(_0x46e4ca=>{const _0xd05a33=_0x566df9;_0x205bc6['on'](_0x4ca427[_0xd05a33(0xcf)],_0x3853a3=>{const _0x1fb098=_0xd05a33;logger[_0x1fb098(0xf1)](_0x55ee2e+_0x1fb098(0xec)+_0x3853a3),_0x4ca427['AZNYQ'](_0x46e4ca,_0x3853a3);});});[_0x4ca427[_0x566df9(0xee)],_0x4ca427[_0x566df9(0xe1)],_0x4ca427[_0x566df9(0xeb)],_0x4ca427['vFzPL']][_0x566df9(0xdc)](_0x487449=>{const _0x4fbe9e=_0x566df9,_0x5812d3={};_0x5812d3[_0x4fbe9e(0xc9)]=_0x4ca427[_0x4fbe9e(0xf8)];const _0x1a7065=_0x5812d3;process['on'](_0x487449,()=>{const _0x468eeb=_0x4fbe9e;if(_0x2d1a2c)return;_0x2d1a2c=!![],logger[_0x468eeb(0xf1)](_0x468eeb(0xd5)+_0x487449+',\x20forwarding\x20to\x20child\x20process...'),_0x205bc6&&!_0x205bc6[_0x468eeb(0xf0)]&&(_0x205bc6[_0x468eeb(0xdb)](_0x487449),logger[_0x468eeb(0xf1)](_0x1a7065[_0x468eeb(0xc9)]));});});const _0x5d7e9e=await _0x30baf4;await _0x4ca427[_0x566df9(0xbf)](sleep),process[_0x566df9(0xba)](_0x5d7e9e);}catch(_0x326ddc){logger[_0x566df9(0xe5)](_0x566df9(0xb3)+_0x326ddc['message']),logger[_0x566df9(0xf1)](_0x566df9(0xb9)+(_0x326ddc['stack']||JSON[_0x566df9(0xd8)](_0x326ddc))),await _0x4ca427[_0x566df9(0xd3)](sleep),process['exit'](0x1);}}function a29_0x1c2e(){const _0xc881d7=['../../helpers/logger','checkAndUpdateCli','lBcax','stack','XNzfW','xHVoL','Failed\x20initiating\x20load\x20test:\x20','exports','WYiSI','16ZhaHEf','1370198pgxfhl','SIGINT','Error\x20details:\x20','exit','WLwfJ','BROWSERSTACK_ACCESSKEY','getExistingCliPath','BROWSERSTACK_USERNAME','AROHa','../v2/cliUtils','path','Spawning:\x20','inherit','argv','BROWSERSTACK_USER','slice','245502ftLbDb','winstonLogger','VjhSz','14236YPgLUd','Error\x20loading\x20configuration:\x20','Error\x20Details:\x20','userName','../../helpers/helper','qLUWV','CLI\x20binary\x20found,\x20Checking\x20for\x20CLI\x20updates','Authentication\x20incomplete.\x20Please\x20add\x20your\x20userName\x20and\x20accessKey\x20to\x20either\x20the\x20browserstack.yml\x20file\x20or\x20as\x20environment\x20variables,\x20then\x20try\x20running\x20the\x20command\x20again.','Waiting\x20for\x20child\x20process\x20to\x20exit...','vMBkY','BROWSERSTACK_ACCESS_KEY','Received\x20','4420913Nuiana','env','stringify','6078720HBOIKb','load','kill','forEach','vgFyU','lliAH','SIGQUIT','close','Mvlry','accessKey','./loadUtils','join','error','getCliDir','SIGTERM','message','1215417gSatCX','1041343jevpGa','XrBUS','\x20exited\x20with\x20code\x20','SIGHUP','uhpNc','EpLmJ','killed','debug','ObRDq'];a29_0x1c2e=function(){return _0xc881d7;};return a29_0x1c2e();}module[a29_0x54731a(0xb4)]=executeLoadTest;