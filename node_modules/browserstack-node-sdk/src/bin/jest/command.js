#!/usr/bin/env node
'use strict';const a16_0x35ed0d=a16_0x26f7;(function(_0x1c370c,_0x287659){const _0x4183c7=a16_0x26f7,_0x2efba0=_0x1c370c();while(!![]){try{const _0x2cc316=-parseInt(_0x4183c7(0xff))/0x1+-parseInt(_0x4183c7(0xed))/0x2*(-parseInt(_0x4183c7(0xa5))/0x3)+-parseInt(_0x4183c7(0xbf))/0x4+-parseInt(_0x4183c7(0x102))/0x5+parseInt(_0x4183c7(0x113))/0x6*(-parseInt(_0x4183c7(0xfa))/0x7)+-parseInt(_0x4183c7(0x15b))/0x8*(-parseInt(_0x4183c7(0xc6))/0x9)+parseInt(_0x4183c7(0x110))/0xa*(parseInt(_0x4183c7(0x154))/0xb);if(_0x2cc316===_0x287659)break;else _0x2efba0['push'](_0x2efba0['shift']());}catch(_0x1dac55){_0x2efba0['push'](_0x2efba0['shift']());}}}(a16_0x4fe3,0xba38c));const fs=require('fs'),path=require(a16_0x35ed0d(0x11d)),util=require(a16_0x35ed0d(0x15c)),{spawn}=require(a16_0x35ed0d(0xe5)),logger=require(a16_0x35ed0d(0xbc))[a16_0x35ed0d(0xfd)],{default:BrowserStackSetup}=require(a16_0x35ed0d(0xc1)),helper=require('../../helpers/helper'),utilities=require('../../helpers/utilities'),constants=require(a16_0x35ed0d(0xab)),accessibilityHelper=require(a16_0x35ed0d(0x10a)),{updateTestRerunConfig}=require(a16_0x35ed0d(0x114)),testOpsHelper=require('../../helpers/test-observability/utils'),{debug}=require(a16_0x35ed0d(0xa9)),TestDetails=require(a16_0x35ed0d(0xa8)),{getPercyOptions}=require(a16_0x35ed0d(0xea)),TestHubHandler=require(a16_0x35ed0d(0xd1)),testhubUtils=require(a16_0x35ed0d(0x14b)),{FRAMEWORKS}=require(a16_0x35ed0d(0xf3)),PerformanceTester=require(a16_0x35ed0d(0xda)),PerformanceEvents=require('../../helpers/performance/constants')[a16_0x35ed0d(0x119)],TestOrchestrationHandler=require(a16_0x35ed0d(0x160)),getUserJestConfigs=async(_0x4f85a6,_0x346bb5)=>{const _0x25b08b=a16_0x35ed0d,_0x841a6a={'GPDrJ':_0x25b08b(0xb7),'ajAZx':_0x25b08b(0xfb),'EhgPj':function(_0x24c39b,_0x28b115){return _0x24c39b||_0x28b115;},'mvtiN':function(_0x4fc823,_0x5dda91){return _0x4fc823(_0x5dda91);},'gFeai':_0x25b08b(0x15d),'BBaqw':_0x25b08b(0x10c),'FibMe':'mjs','wbiiy':'cjs','rfPll':_0x25b08b(0xd8)},_0x50c960=helper[_0x25b08b(0x162)](_0x841a6a[_0x25b08b(0xcc)],_0x841a6a[_0x25b08b(0x14d)]),_0x528ed7=_0x346bb5['findIndex'](_0x2fdef4=>_0x2fdef4===_0x25b08b(0xae));if(!helper[_0x25b08b(0x128)](_0x4f85a6[_0x25b08b(0x152)])){logger['info'](_0x25b08b(0xb3)+_0x4f85a6[_0x25b08b(0x152)]),process[_0x25b08b(0xfc)][_0x25b08b(0x14c)]=_0x4f85a6[_0x25b08b(0x152)];const _0x529ddf=await(0x0,_0x50c960[_0x25b08b(0x131)])(path[_0x25b08b(0x14a)](_0x4f85a6['config']));return _0x346bb5[_0x25b08b(0x11a)](_0x528ed7,0x2),_0x841a6a[_0x25b08b(0xa6)](_0x529ddf,{});}const _0x2bb44e=_0x841a6a[_0x25b08b(0x148)](require,path['join'](process[_0x25b08b(0xd0)](),_0x841a6a[_0x25b08b(0x166)]));if(_0x2bb44e[_0x25b08b(0x13f)])return logger['info'](_0x841a6a['BBaqw']),_0x2bb44e[_0x25b08b(0x13f)];const _0x337278=['js',_0x841a6a[_0x25b08b(0xd3)],_0x841a6a[_0x25b08b(0x159)],_0x841a6a[_0x25b08b(0xb4)],'ts'];for(const _0x2d6cc2 of _0x337278){const _0x5be8bc=path[_0x25b08b(0xcb)](process[_0x25b08b(0xd0)](),_0x25b08b(0x165)+_0x2d6cc2);if(fs[_0x25b08b(0x16f)](_0x5be8bc)){process['env']['USER_CONFIG_DETAILS_PATH']=_0x5be8bc;const _0x1963f4=await(0x0,_0x50c960[_0x25b08b(0x131)])(_0x5be8bc);return _0x1963f4;}}return{};},getSerial=(_0x44de9b,_0x58381e)=>{const _0x489e52=a16_0x35ed0d,_0x184c76={};_0x184c76[_0x489e52(0x109)]=_0x489e52(0xf5),_0x184c76[_0x489e52(0x170)]=function(_0x7acc5a,_0xb40942){return _0x7acc5a>_0xb40942;},_0x184c76['HfxyE']=function(_0x272f8d,_0xebf0dd){return _0x272f8d>_0xebf0dd;},_0x184c76['oYxsd']=_0x489e52(0x101);const _0x4eeee4=_0x184c76;let _0x3f5371=_0x4eeee4[_0x489e52(0x109)];return _0x4eeee4['QWtFP'](_0x44de9b[_0x489e52(0x15e)],0x1)&&(!_0x58381e[_0x489e52(0x111)]&&(helper['isUndefined'](_0x58381e[_0x489e52(0x103)])||_0x4eeee4['HfxyE'](_0x58381e[_0x489e52(0x103)],0x1)))&&(_0x3f5371=_0x4eeee4[_0x489e52(0x147)]),_0x3f5371;},getMaxWorkers=(_0x819cbf,_0x3d131,_0x47b198)=>{const _0x57fda0=a16_0x35ed0d,_0x30a558={'zuIAo':function(_0xf73e88,_0x5a6b09){return _0xf73e88(_0x5a6b09);}};let _0x3da224=0x1;if(!helper[_0x57fda0(0x128)](_0x3d131[_0x57fda0(0xc5)]))_0x3da224=_0x30a558[_0x57fda0(0xcf)](parseInt,_0x3d131[_0x57fda0(0xc5)]);else{if(!helper[_0x57fda0(0x128)](_0x819cbf[_0x57fda0(0x103)]))_0x3da224=_0x819cbf[_0x57fda0(0x103)];else!helper[_0x57fda0(0x128)](_0x47b198[_0x57fda0(0x103)])&&(_0x3da224=_0x47b198['maxWorkers']);}return _0x3da224;};function a16_0x26f7(_0x1d8ac6,_0x2c17e4){const _0x4fe3b0=a16_0x4fe3();return a16_0x26f7=function(_0x26f72d,_0x4772f6){_0x26f72d=_0x26f72d-0xa2;let _0x530e14=_0x4fe3b0[_0x26f72d];return _0x530e14;},a16_0x26f7(_0x1d8ac6,_0x2c17e4);}function a16_0x4fe3(){const _0xac1831=['finalExecution','testRunner','cNAHX','gJpPR','testObservability','iixpe','OJQSR','accessibility','ooUgR','getPackageType','child_process','platformCaps','setupTCGAuth','child\x20process\x20exited\x20with\x20code\x20','npx','../../helpers/percy/utils','getTCGConfigFilePaths','Error\x20while\x20parsing\x20','2477994wEVcgy','JEST_TEST_ORDER','JRHmX','iKIuC','const\x20config=','assign','../../helpers/test-observability/constants','customEnvironment.js','true','Deleting\x20','runner','nIRlW','isNotUndefined','14DMswcT','jest-config','env','winstonLogger','errorMessage','1240946xYeZkO','inherit','false','3022380vAqZOg','maxWorkers','end','AXVpK',';\x0a\x20\x20\x20\x20\x20\x20fs.writeFileSync(path.join(__dirname,\x20\x27jest_browserstack_results.json\x27),\x20JSON.stringify(results));\x0a\x20\x20\x20\x20\x20\x20return\x20_someFunc.call(this,\x20testContexts,\x20results);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20var\x20_onTestFileResultOrig\x20=\x20ReporterDispatcher.prototype.onTestFileResult;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onTestFileResult\x20=\x20async\x20function\x20(test,\x20testResult,\x20result)\x20{\x0a\x20\x20\x20\x20\x20\x20testResult.platform\x20=\x20helper.getPlatformName(test.context.config.capability);\x0a\x20\x20\x20\x20\x20\x20return\x20_onTestFileResultOrig.call(this,\x20test,\x20testResult,\x20result);\x0a\x20\x20\x20\x20}\x0a\x20\x20','customImplements','skipSessionName','QKLBS','../../helpers/accessibility-automation/helper','recursive','Getting\x20your\x20jest\x20configs\x20from\x20package.json','test-observability','exitCode','grDLu','19563210kEMtgm','runInBand','parseTestOrchestrationOptions','1402158sNSErQ','./test-observability/helper','useW3C','getHubUrl','\x20with\x20browserstack\x20jest\x20configs','\x0a\x0a\x20\x20\x20\x20const\x20ReporterDispatcher\x20=\x20_interopRequireDefault(requireModule(\x27@jest/core/build/ReporterDispatcher.js\x27,\x20\x27@jest/core\x27)).default;\x20//node_modules/@jest/core/build/ReporterDispatcher.js\x0a\x20\x20\x20\x20const\x20fs\x20=\x20require(\x27fs\x27);\x0a\x20\x20\x20\x20const\x20path\x20=\x20require(\x27path\x27);\x0a\x20\x20\x20\x20const\x20helper\x20=\x20require(\x27../../../helpers/helper\x27);\x0a\x20\x20\x20\x20var\x20_someFunc\x20=\x20ReporterDispatcher.prototype.onRunComplete;\x0a\x20\x20\x20\x20ReporterDispatcher.prototype.onRunComplete\x20=\x20async\x20function\x20(testContexts,\x20results)\x20{\x0a\x20\x20\x20\x20\x20\x20results.numTotalTestSuites\x20=\x20results.numTotalTestSuites\x20*\x20','EVENTS','splice','PACKAGE_TYPE','setupFiles','path','data-hooks.js','getErrorMessageFromResults','stringify','force','log','IrnDL','maxFailures','slice','testSequencer','igdTD','isUndefined','close','reorderTestFiles','Tsxbw','skipping\x20test_before\x20setup\x20since\x20selenium\x20not\x20found','customTestRunner.js','BROWSERSTACK_TEST_ACCESSIBILITY_CONFIGURATION_YML','FRAMEWORKS','launchBuild','default','SWHDJ','testEnvironment','PzFja','lmSto','RYNPe','agtyf','Showing\x20jest\x20logs\x20and\x20reporter\x20logs.','setupFilesAfterEnv','writeFileSync','parallels__','workingDir','MODULE','XNTwV','jest','win32','Umkjf','testContextOptions','serial__','JhdhZ','Unable\x20to\x20find\x20jest-circus,\x20','BSTACK_JEST_TEST_ENV','oYxsd','mvtiN','requireSeleniumWebdriver','resolve','../../helpers/testhub/utils','USER_CONFIG_DETAILS_PATH','ajAZx','jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js','mGpAP','printBuildLink','setup','config','BROWSERSTACK_TEST_OBSERVABILITY_YML','11ASlkyW','Found:\x20','failFast','initialize','ymEge','wbiiy','turboScaleUrl','4703368nCrtFD','util','package.json','length','prepareCapabilities','../../helpers/test-orchestration/testOrchestrationHandler','fnndX','requireModule','jest.setup.js','Error\x20while\x20deleting\x20fail-fast\x20state\x20folder:\x20','jest.config.','gFeai','jvrId','testEnvironmentOptions','\x0amodule.exports\x20=\x20config;','DqYvD','timeout__','error\x20removing\x20tcg\x20config\x20file','proxySettings','jest_browserstack_results.json','existsSync','QWtFP','filterBrowserstackArgs','jest-circus','skipSessionStatus','platform','rmSync','platforms','3cDIlyT','EhgPj','fxbMY','./test-observability/test-details','../../helpers/test-observability/utils','retryTestsOnFailure','../utils/constants','findTestFiles','shouldProcessEventForTesthub','--config','xVWqD','isEmpty','isTestOrchestrationEnabled','RaWao','Getting\x20your\x20jest\x20configs\x20from\x20','rfPll','format','jTnCQ','jest-config/build/readConfigFileAndSetRootDir.js','zteHy','Modifying\x20jest\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','jest_browserstack.config.cjs','reporters','../../helpers/logger','Creating\x20','accessibilityOptions','2830668gGDquD','browserStackPercyOptions','../../helpers/BrowserStackSetup','abortBuildOnFailure','jest_browserstack.config.js','XeGCI','parallelsPerPlatform','9iTMjtt','push','customCircus.js','unlinkSync','Deleted\x20fail-fast\x20state\x20folder:\x20','join','GPDrJ','info','debug','zuIAo','cwd','../../helpers/testhub/testhubHandler','customTestRunnerTemplate.js','FibMe','retries__','readFileSync','error','SDK_SETUP','json','handleApp','../../helpers/performance/performance-tester'];a16_0x4fe3=function(){return _0xac1831;};return a16_0x4fe3();}async function run(_0x5707a5,_0x416264,_0x1137e4){const _0x3b4f60=a16_0x35ed0d,_0x1a9b84={'saLLR':_0x3b4f60(0x16c),'jTnCQ':_0x3b4f60(0x13f),'Umkjf':function(_0x55cd09,_0x4c0001){return _0x55cd09(_0x4c0001);},'xVWqD':function(_0x502ac3,_0x439897){return _0x502ac3!=_0x439897;},'gJpPR':_0x3b4f60(0xf5),'lmSto':function(_0x3a55b4,_0x1db8e8,_0x12806b){return _0x3a55b4(_0x1db8e8,_0x12806b);},'SWHDJ':_0x3b4f60(0xb9),'RaWao':function(_0x456f31,_0x27e171){return _0x456f31(_0x27e171);},'IrnDL':function(_0x38c2a9,_0x866026,_0x1fff24){return _0x38c2a9(_0x866026,_0x1fff24);},'agtyf':function(_0x1abab7,_0x178192,_0x573912,_0x58e07f){return _0x1abab7(_0x178192,_0x573912,_0x58e07f);},'fnndX':function(_0x4aa811,_0x3b9d51){return _0x4aa811*_0x3b9d51;},'jvrId':function(_0x502a2c,_0x33207){return _0x502a2c===_0x33207;},'nIRlW':_0x3b4f60(0xba),'RdTIy':_0x3b4f60(0xc3),'JhdhZ':_0x3b4f60(0x107),'grDLu':_0x3b4f60(0x16e),'zteHy':_0x3b4f60(0x12d),'cNAHX':_0x3b4f60(0xd2),'AXVpK':_0x3b4f60(0xf4),'ooUgR':_0x3b4f60(0x163),'JRHmX':'customSequencer.js','DqYvD':_0x3b4f60(0x14e),'iixpe':_0x3b4f60(0x172),'XeGCI':_0x3b4f60(0x10d),'iKIuC':_0x3b4f60(0x11e),'Szhvm':_0x3b4f60(0xc8),'ymEge':'test_before.setup.js','XpPhs':_0x3b4f60(0x12c),'mGpAP':_0x3b4f60(0x131),'DtRar':'Test\x20orchestration\x20is\x20enabled,\x20initializing\x20orchestration\x20handler','OJQSR':function(_0x4c0f39,_0xd340cb){return _0x4c0f39>_0xd340cb;},'igdTD':_0x3b4f60(0x138),'fxbMY':function(_0x3b50a4,_0x1475e4,_0x2e8135,_0x50d22e){return _0x3b50a4(_0x1475e4,_0x2e8135,_0x50d22e);},'XNTwV':_0x3b4f60(0xe9),'Tsxbw':'--config','PneIU':_0x3b4f60(0x140),'RYNPe':_0x3b4f60(0x100),'PzFja':_0x3b4f60(0x129)};helper['isBrowserstackInfra']()?(await _0x1137e4[_0x3b4f60(0x157)](_0x5707a5),await helper[_0x3b4f60(0xd9)](_0x1137e4['config'])):await _0x1137e4[_0x3b4f60(0xe7)]();if(!_0x1137e4[_0x3b4f60(0x152)])return;_0x1a9b84[_0x3b4f60(0xaf)](_0x1137e4[_0x3b4f60(0x152)][_0x3b4f60(0xdf)],null)?process[_0x3b4f60(0xfc)][_0x3b4f60(0x153)]=_0x1137e4[_0x3b4f60(0x152)][_0x3b4f60(0xdf)]:process['env'][_0x3b4f60(0x153)]=_0x1a9b84[_0x3b4f60(0xde)];const _0x45a961=new TestOrchestrationHandler(_0x1137e4[_0x3b4f60(0x152)]),_0xa29aca=await _0x1a9b84[_0x3b4f60(0x135)](getUserJestConfigs,_0x5707a5,_0x416264);logger[_0x3b4f60(0xcd)](_0x1a9b84[_0x3b4f60(0x132)]);const _0x17b717=Object[_0x3b4f60(0xf2)]({},_0xa29aca);_0x17b717[_0x3b4f60(0x168)]=Object[_0x3b4f60(0xf2)]({},_0x17b717[_0x3b4f60(0x168)],{'server':helper[_0x3b4f60(0x116)](_0x1137e4[_0x3b4f60(0x152)]),'environment':_0xa29aca[_0x3b4f60(0x133)]}),_0x17b717['testEnvironmentOptions'][_0x3b4f60(0xc0)]=_0x1a9b84[_0x3b4f60(0xb2)](getPercyOptions,_0x1137e4[_0x3b4f60(0x152)]);const _0x51006e=helper[_0x3b4f60(0x115)](_0x1137e4[_0x3b4f60(0x152)]);!helper[_0x3b4f60(0x128)](_0x1137e4[_0x3b4f60(0x152)]['accessibilityOptions'])&&(process['env'][_0x3b4f60(0x12e)]=JSON['stringify'](_0x1137e4[_0x3b4f60(0x152)][_0x3b4f60(0xbe)]));const _0x2998ea=await TestHubHandler[_0x3b4f60(0x130)](FRAMEWORKS['JEST'],_0x1137e4),_0x51a2cd=helper[_0x3b4f60(0x15f)](_0x1137e4[_0x3b4f60(0x152)],_0x51006e,constants[_0x3b4f60(0x12f)]['JEST']);let _0x32bac6=_0x1137e4['config'][_0x3b4f60(0xe2)];_0x32bac6=_0x32bac6||accessibilityHelper['checkAccessibilityPlatformConfig'](_0x1137e4[_0x3b4f60(0x152)]),process['env']['BROWSERSTACK_TEST_ACCESSIBILITY_YML']=_0x32bac6,_0x17b717[_0x3b4f60(0x168)]['capabilities']=_0x51a2cd,_0x17b717[_0x3b4f60(0x168)][_0x3b4f60(0x143)]=_0x1a9b84[_0x3b4f60(0x123)](getSerial,_0x51a2cd,_0x5707a5),_0x17b717[_0x3b4f60(0x168)][_0x3b4f60(0x13b)]=_0x1a9b84[_0x3b4f60(0x137)](getMaxWorkers,_0x5707a5,_0x1137e4[_0x3b4f60(0x152)],_0xa29aca),_0x17b717['testEnvironmentOptions']['proxySettings']=_0x1137e4[_0x3b4f60(0x152)][_0x3b4f60(0x16d)],_0x17b717[_0x3b4f60(0x168)][_0x3b4f60(0x16b)]=_0x1a9b84[_0x3b4f60(0x161)](_0x5707a5['testTimeout'],0x1)||0x1388,_0x17b717[_0x3b4f60(0x168)]['skipSessionName']=_0x1137e4['config'][_0x3b4f60(0x142)][_0x3b4f60(0x108)],_0x17b717[_0x3b4f60(0x168)][_0x3b4f60(0x173)]=_0x1137e4[_0x3b4f60(0x152)][_0x3b4f60(0x142)][_0x3b4f60(0x173)],_0x17b717['testEnvironmentOptions']['browserStackLogLevel']=_0x1137e4['config']['logLevel'],_0x17b717[_0x3b4f60(0x168)][_0x3b4f60(0x15a)]=_0x1137e4[_0x3b4f60(0x152)][_0x3b4f60(0x15a)],_0x17b717['testEnvironmentOptions'][_0x3b4f60(0xe6)]=_0x1137e4[_0x3b4f60(0x152)][_0x3b4f60(0xa4)];const _0x119f25=helper[_0x3b4f60(0x112)](_0x1137e4[_0x3b4f60(0x152)]);if(!helper[_0x3b4f60(0xb0)](_0x119f25)){helper['isNotUndefined'](_0x119f25['retryTestsOnFailure'])&&(_0x17b717[_0x3b4f60(0x168)][_0x3b4f60(0xd4)]=_0x119f25[_0x3b4f60(0xaa)]['maxRetries']);if(helper[_0x3b4f60(0xf9)](_0x119f25['abortBuildOnFailure'])&&helper[_0x3b4f60(0xf9)](_0x119f25['abortBuildOnFailure'][_0x3b4f60(0x13c)])){const _0x53b021={};_0x53b021['failureThresholdCount']=_0x119f25[_0x3b4f60(0xc2)][_0x3b4f60(0x124)],_0x53b021[_0x3b4f60(0x13c)]=_0x119f25[_0x3b4f60(0xc2)]['workingDir'],_0x17b717[_0x3b4f60(0x168)][_0x3b4f60(0x156)]=_0x53b021;}}let _0x48fa3f='';_0x1a9b84[_0x3b4f60(0x167)](helper[_0x3b4f60(0xe4)](),constants[_0x3b4f60(0x11b)][_0x3b4f60(0x13d)])?_0x48fa3f=_0x1a9b84[_0x3b4f60(0xf8)]:_0x48fa3f=_0x1a9b84['RdTIy'];const _0xa6bb50=_0x48fa3f,_0x4d399d=path[_0x3b4f60(0xcb)](__dirname,_0x1a9b84[_0x3b4f60(0x144)],_0x1a9b84[_0x3b4f60(0x10f)]),_0x2f8a87=path[_0x3b4f60(0xcb)](__dirname,_0x1a9b84[_0x3b4f60(0x144)],_0x1a9b84[_0x3b4f60(0xb8)]),_0xcd59b5=path['join'](__dirname,_0x1a9b84[_0x3b4f60(0x144)],_0x1a9b84[_0x3b4f60(0xdd)]);_0x17b717[_0x3b4f60(0x133)]&&(process[_0x3b4f60(0xfc)][_0x3b4f60(0x146)]=_0x17b717[_0x3b4f60(0x133)]);_0x17b717['testEnvironment']=path[_0x3b4f60(0xcb)](__dirname,_0x1a9b84[_0x3b4f60(0x144)],_0x1a9b84[_0x3b4f60(0x105)]),_0x17b717[_0x3b4f60(0xf7)]=_0x2f8a87,_0x17b717[_0x3b4f60(0x139)]=_0x17b717[_0x3b4f60(0x139)]||[],_0x17b717[_0x3b4f60(0x139)][_0x3b4f60(0xc7)](path['join'](__dirname,_0x1a9b84[_0x3b4f60(0xe3)]));_0x45a961['isTestOrchestrationEnabled']()&&(_0x17b717[_0x3b4f60(0x126)]=path['join'](__dirname,_0x1a9b84['JhdhZ'],_0x1a9b84[_0x3b4f60(0xef)]));if(testhubUtils['shouldProcessEventForTesthub']()){let _0x568ec3=null;try{_0x568ec3=helper[_0x3b4f60(0x162)](_0x1a9b84[_0x3b4f60(0x16a)],_0x1a9b84[_0x3b4f60(0xe0)]);}catch(_0x5b9f59){_0x1a9b84[_0x3b4f60(0x141)](debug,_0x3b4f60(0x145)+_0x5b9f59);}_0x568ec3&&(_0x17b717['setupFilesAfterEnv'][_0x3b4f60(0xc7)](path[_0x3b4f60(0xcb)](__dirname,_0x1a9b84[_0x3b4f60(0xc4)],_0x1a9b84[_0x3b4f60(0xf0)])),_0x17b717[_0x3b4f60(0xdc)]=path[_0x3b4f60(0xcb)](__dirname,_0x1a9b84['JhdhZ'],_0x1a9b84['Szhvm']));}_0x17b717['setupFiles']=_0x17b717[_0x3b4f60(0x11c)]||[];try{helper[_0x3b4f60(0x149)](),_0x17b717[_0x3b4f60(0x11c)][_0x3b4f60(0xc7)](path[_0x3b4f60(0xcb)](__dirname,_0x1a9b84[_0x3b4f60(0x158)]));}catch{logger['debug'](_0x1a9b84['XpPhs']);}_0x17b717['reporters']=_0x17b717[_0x3b4f60(0xbb)]||[_0x1a9b84[_0x3b4f60(0x14f)]],_0x1a9b84[_0x3b4f60(0x135)](updateTestRerunConfig,_0x17b717,_0x1137e4);const _0x402d80=fs[_0x3b4f60(0xd5)](_0xcd59b5);fs[_0x3b4f60(0x13a)](_0x17b717[_0x3b4f60(0xf7)],'\x0a\x20\x20\x20\x20'+_0x402d80+_0x3b4f60(0x118)+_0x1137e4[_0x3b4f60(0x152)]['platforms'][_0x3b4f60(0x15e)]+_0x3b4f60(0x106)),logger[_0x3b4f60(0xcd)](_0x3b4f60(0xbd)+_0xa6bb50+_0x3b4f60(0x117)),fs[_0x3b4f60(0x13a)](_0xa6bb50,_0x3b4f60(0xf1)+JSON[_0x3b4f60(0x120)](_0x17b717)+_0x3b4f60(0x169));if(_0x45a961[_0x3b4f60(0xb1)]()){logger['debug'](_0x1a9b84['DtRar']);const _0x3443a7=await _0x45a961[_0x3b4f60(0xac)](_0x17b717,_0x416264[_0x3b4f60(0x125)](0x1),_0xa6bb50);logger[_0x3b4f60(0xce)](_0x3b4f60(0x155)+JSON[_0x3b4f60(0x120)](_0x3443a7)+'\x20test\x20files\x20to\x20run.');const _0x11e00a=await _0x45a961[_0x3b4f60(0x12a)](_0x3443a7);logger['debug']('Reodered\x20Test\x20Files:\x20'+JSON['stringify'](_0x11e00a)),_0x11e00a&&_0x1a9b84[_0x3b4f60(0xe1)](_0x11e00a[_0x3b4f60(0x15e)],0x0)&&(process[_0x3b4f60(0xfc)][_0x3b4f60(0xee)]=_0x11e00a?.[_0x3b4f60(0xcb)](','));}logger[_0x3b4f60(0xcd)](_0x1a9b84[_0x3b4f60(0x127)]);testhubUtils[_0x3b4f60(0xad)]()&&TestDetails[_0x3b4f60(0x151)]();helper[_0x3b4f60(0x171)]({},_0x416264),PerformanceTester[_0x3b4f60(0x104)](PerformanceEvents[_0x3b4f60(0xd7)]);const _0x24b057=_0x1a9b84[_0x3b4f60(0xa7)](spawn,_0x1a9b84[_0x3b4f60(0x13e)],[_0x1a9b84[_0x3b4f60(0xb6)],_0x1a9b84[_0x3b4f60(0x12b)],_0xa6bb50,..._0x416264[_0x3b4f60(0x125)](0x1)],{'shell':_0x1a9b84[_0x3b4f60(0x167)](process[_0x3b4f60(0xa2)],_0x1a9b84['PneIU']),'stdio':_0x1a9b84[_0x3b4f60(0x136)],'env':Object[_0x3b4f60(0xf2)]({},process['env'])});_0x24b057['on'](_0x1a9b84[_0x3b4f60(0x134)],async _0x5d09b7=>{const _0x5a4b9b=_0x3b4f60;PerformanceTester['start'](PerformanceEvents['SDK_CLEANUP']);try{const {browserstackFolderPath:_0x560733,tcgConfigPath:_0x56a604}=helper[_0x5a4b9b(0xeb)]();fs[_0x5a4b9b(0xc9)](_0x56a604),fs['rmdirSync'](_0x560733);}catch(_0x5445d4){logger[_0x5a4b9b(0xce)](_0x1a9b84['saLLR'],_0x5445d4);}process[_0x5a4b9b(0x10e)]=_0x5d09b7,logger[_0x5a4b9b(0xce)](_0x5a4b9b(0xe8)+_0x5d09b7),logger[_0x5a4b9b(0xcd)](_0x5a4b9b(0xf6)+_0xa6bb50);if(helper[_0x5a4b9b(0xf9)](_0x119f25)&&helper['isNotUndefined'](_0x119f25[_0x5a4b9b(0xc2)])&&fs[_0x5a4b9b(0x16f)](_0x119f25['abortBuildOnFailure'][_0x5a4b9b(0x13c)]))try{const _0x2a589e={};_0x2a589e[_0x5a4b9b(0x10b)]=!![],_0x2a589e[_0x5a4b9b(0x121)]=!![],fs[_0x5a4b9b(0xa3)](_0x119f25['abortBuildOnFailure']['workingDir'],_0x2a589e),logger['debug'](_0x5a4b9b(0xca)+_0x119f25['abortBuildOnFailure'][_0x5a4b9b(0x13c)]);}catch(_0x524269){logger[_0x5a4b9b(0xd6)](_0x5a4b9b(0x164)+_0x524269);}let _0x3b4be9=null;if(fs['existsSync'](_0x4d399d)){_0x3b4be9=fs[_0x5a4b9b(0xd5)](_0x4d399d);try{_0x3b4be9=JSON['parse'](_0x3b4be9);}catch(_0x316e94){logger[_0x5a4b9b(0xce)](_0x5a4b9b(0xec)+_0x4d399d+',\x20'+_0x3b4be9+'\x20:\x20'+_0x316e94);}fs[_0x5a4b9b(0xc9)](_0x4d399d);}fs[_0x5a4b9b(0xc9)](_0xa6bb50),fs[_0x5a4b9b(0xc9)](_0x2f8a87),_0x3b4be9&&(_0x1137e4[_0x5a4b9b(0xfe)]=helper[_0x5a4b9b(0x11f)](_0x3b4be9,_0x1a9b84[_0x5a4b9b(0xb6)],_0x1137e4));try{await TestHubHandler['stop']();}catch(_0x3f805c){console[_0x5a4b9b(0x122)](_0x3f805c),_0x1a9b84['Umkjf'](debug,'Exception\x20in\x20stop\x20build\x20request\x20to\x20TestHub\x20:\x20'+util[_0x5a4b9b(0xb5)](_0x3f805c));}testOpsHelper[_0x5a4b9b(0x150)](),TestDetails['shutdown'](),await utilities[_0x5a4b9b(0xdb)](_0x1137e4);});}module['exports']=run;