const a18_0x33f181=a18_0x119e;function a18_0x2b89(){const _0x211b67=['projectName','default','quit','225RZUHNh','errors','MWXLj','BSTACK_JEST_TEST_ENV','handleTestEvent','info','../../../helpers/logger','teardown','zBtMv','buildName','wafvU','getTestEnvironment','PMOeM','driver','isNotUndefined','browserstackPercyBestPlatform','sessionNameProvided','platformCaps','node','configuration','jest-config','Error\x20in\x20fail-fast\x20test_done\x20handler:','__skipSessionStatus','lHGas','Fail-fast\x20is\x20active,\x20skipping\x20test::\x20','Builder','percyCaptureMode','vkxxP','jest-environment-node','Smtjc','BSTACK_DELTA','__webdriver','__driversArray','message','38014930FefEkQ','testEnvironmentOptions','skipSessionStatus','BRxbH','join','kVelU','test_start','EavDh','__platformCaps','skipSessionName','failFastOptions','8|2|3|4|1|7|9|6|0|5','nrWML','browserStackGlobals','MgkZZ','browserStackPercyOptions','../../../index','resolveTestEnvironment','424264qPDrYc','vaudY','JEST','1138NzOTxW','../../../helpers/test-orchestration/failfastManager','../test-observability/obsReporter','15triNVP','cleanupDrivers','framework','oDMFP','../../../helpers/test-observability/utils','__drivers','dQTCN','shouldFailFast','getInstance','capability','zgjCS','3176454mWYguB','naTst','SWeGI','builder','tGLgh','dlgtj','browserstackAgentV2','debug','ApDPJ','projectConfig','browserstackPlatformIndex','NdJjT','DBYOv','modifyCommand','percy','qAIKs','skip','UXjWC','setup','requireModule','timeout__','onTestDone','test','failFastActive','nestedKeyValue','testContext','winstonLogger','shouldProcessEventForTesthub','bstack:options','1173345qeAuGI','global','__esModule','894348jfkFOt','cleanup','1380276zeWmKv','6YxCgTu','__timeout','../../../helpers/helper','../../../helpers/test-observability/requestQueueHandler','bXkPu','jest-resolve','testPath','\x20>\x20','cwd','rJbML','isTrue','failFast'];a18_0x2b89=function(){return _0x211b67;};return a18_0x2b89();}(function(_0x4583e2,_0x11055b){const _0x540e38=a18_0x119e,_0x17d7c8=_0x4583e2();while(!![]){try{const _0x7d5d0e=parseInt(_0x540e38(0x1a1))/0x1*(parseInt(_0x540e38(0x15b))/0x2)+parseInt(_0x540e38(0x155))/0x3+-parseInt(_0x540e38(0x15a))/0x4+parseInt(_0x540e38(0x1a4))/0x5*(-parseInt(_0x540e38(0x1af))/0x6)+-parseInt(_0x540e38(0x158))/0x7+parseInt(_0x540e38(0x19e))/0x8*(-parseInt(_0x540e38(0x16a))/0x9)+parseInt(_0x540e38(0x18c))/0xa;if(_0x7d5d0e===_0x11055b)break;else _0x17d7c8['push'](_0x17d7c8['shift']());}catch(_0x13a12e){_0x17d7c8['push'](_0x17d7c8['shift']());}}}(a18_0x2b89,0xc58b1));const helper=require(a18_0x33f181(0x15d)),constants=require('../../utils/constants'),{isTestObservabilitySession}=require(a18_0x33f181(0x1a8)),RequestQueueHandler=require(a18_0x33f181(0x15e)),ObservabilityReporter=require(a18_0x33f181(0x1a3)),testhubUtils=require('../../../helpers/testhub/utils'),logger=require(a18_0x33f181(0x170))[a18_0x33f181(0x152)],getTestEnvironment=((()=>{const _0x371c6e=a18_0x33f181,_0x47ae03={};_0x47ae03[_0x371c6e(0x193)]=_0x371c6e(0x160),_0x47ae03['tGLgh']=_0x371c6e(0x17e);const _0x65176e=_0x47ae03;try{const _0x5c6e53=helper[_0x371c6e(0x14b)](_0x65176e[_0x371c6e(0x193)]);if(_0x5c6e53[_0x371c6e(0x19d)])return _0x5c6e53[_0x371c6e(0x19d)];const _0xc83bfe=helper[_0x371c6e(0x14b)](_0x65176e[_0x371c6e(0x1b3)]);if(_0xc83bfe[_0x371c6e(0x175)])return _0xc83bfe[_0x371c6e(0x175)];}catch{return()=>null;}return()=>null;})()),_jestUserEnvironment=((()=>{const _0x50d4e7=a18_0x33f181,_0x2d3ae4={'UXjWC':function(_0x1fd42d,_0x70c9cd){return _0x1fd42d(_0x70c9cd);},'vkxxP':_0x50d4e7(0x17c),'oDMFP':_0x50d4e7(0x186)},_0x5a6498=_0x2d3ae4[_0x50d4e7(0x149)](getTestEnvironment,{'rootDir':process[_0x50d4e7(0x163)](),'testEnvironment':process['env'][_0x50d4e7(0x16d)]||_0x2d3ae4[_0x50d4e7(0x185)]});if(!_0x5a6498)return _0x2d3ae4[_0x50d4e7(0x149)](_interopRequireDefault,helper[_0x50d4e7(0x14b)](_0x2d3ae4[_0x50d4e7(0x1a7)]));return _0x2d3ae4['UXjWC'](_interopRequireDefault,helper[_0x50d4e7(0x14b)](_0x5a6498));})()),_seleniumWebdriver2=((()=>{const _0x48c075=a18_0x33f181,_0x17fa51={'qAIKs':function(_0x58b89c,_0x233d12){return _0x58b89c(_0x233d12);}};try{const _0x51ad67=helper['requireSeleniumWebdriver']();return helper[_0x48c075(0x1bc)](),_0x17fa51[_0x48c075(0x1be)](_interopRequireDefault,_0x51ad67);}catch{return null;}})());function _interopRequireDefault(_0x20a0fb){const _0x46812d=a18_0x33f181;return _0x20a0fb&&_0x20a0fb[_0x46812d(0x157)]?_0x20a0fb:{'default':_0x20a0fb};}const originalBuilder=_seleniumWebdriver2?_seleniumWebdriver2['default'][a18_0x33f181(0x183)]:null;function a18_0x119e(_0x2f44a9,_0x1cbfd2){const _0x2b8982=a18_0x2b89();return a18_0x119e=function(_0x119ebd,_0x385065){_0x119ebd=_0x119ebd-0x149;let _0x553059=_0x2b8982[_0x119ebd];return _0x553059;},a18_0x119e(_0x2f44a9,_0x1cbfd2);}class CustomEnvironment extends _jestUserEnvironment[a18_0x33f181(0x168)]{constructor(_0x1805d9){const _0x183d29=a18_0x33f181,_0x326cd2={'bXkPu':'quit','MWXLj':function(_0xd61730,_0x150580){return _0xd61730+_0x150580;},'dQTCN':_0x183d29(0x154),'BRxbH':function(_0x4870ec,_0x390fbd){return _0x4870ec(_0x390fbd);},'UIrsY':_0x183d29(0x1a2),'lHGas':_0x183d29(0x197),'rJbML':'testEnvironmentOptions','zgjCS':_0x183d29(0x19b),'wafvU':_0x183d29(0x1bd),'xlXbI':function(_0x1e1446,_0x205cd6){return _0x1e1446(_0x205cd6);},'vaudY':_0x183d29(0x19c),'ApDPJ':_0x183d29(0x179),'Smtjc':_0x183d29(0x184),'PMOeM':_0x183d29(0x17b)};super(_0x1805d9),this[_0x183d29(0x156)][_0x183d29(0x15c)]=0x0,this[_0x183d29(0x17d)]={};!_0x1805d9[_0x183d29(0x18d)]&&(_0x1805d9[_0x183d29(0x18d)]={});if(helper['isBrowserstackInfra']()){_0x1805d9[_0x183d29(0x18d)]=_0x1805d9['projectConfig']?_0x1805d9['projectConfig']['testEnvironmentOptions']:_0x1805d9[_0x183d29(0x18d)],this[_0x183d29(0x1b2)]=new _seleniumWebdriver2['default'][(_0x183d29(0x183))](),this[_0x183d29(0x1ad)]=_0x1805d9[_0x183d29(0x1b8)]?_0x1805d9[_0x183d29(0x1b8)][_0x183d29(0x1ad)]:_0x1805d9[_0x183d29(0x1ad)],this[_0x183d29(0x156)]['__timeout']=_0x326cd2[_0x183d29(0x16c)](this['configuration'][_0x183d29(0x14c)],constants[_0x183d29(0x188)]),this[_0x183d29(0x196)]=_0x1805d9[_0x183d29(0x18d)][_0x183d29(0x166)];if(this[_0x183d29(0x196)]){const _0x4a4a07=this['capability'][_0x326cd2[_0x183d29(0x1aa)]]?.[_0x183d29(0x173)]||'',_0x280642=this[_0x183d29(0x1ad)][_0x326cd2[_0x183d29(0x1aa)]]?.[_0x183d29(0x167)]||'';this[_0x183d29(0x166)]=new(_0x326cd2[_0x183d29(0x18f)](require,_0x326cd2['UIrsY']))(this[_0x183d29(0x196)],_0x4a4a07,_0x280642),this[_0x183d29(0x156)][_0x183d29(0x14f)]=![];}helper[_0x183d29(0x178)](this['configuration']['retries__'])&&(this[_0x183d29(0x156)]['__jestRetries']=this['configuration']['retries__']);}if(testhubUtils[_0x183d29(0x153)]()){const _0x27f688=new ObservabilityReporter();_0x27f688['registerListeners']();}this[_0x183d29(0x156)][_0x183d29(0x199)]={},this[_0x183d29(0x17d)]=_0x1805d9[_0x183d29(0x18d)],this[_0x183d29(0x17d)][_0x183d29(0x1a6)]=constants['FRAMEWORKS'][_0x183d29(0x1a0)];if(_seleniumWebdriver2){const _0x5562db=_0x326cd2[_0x183d29(0x181)]['split']('|');let _0x3c2c81=0x0;while(!![]){switch(_0x5562db[_0x3c2c81++]){case'0':this['global'][_0x183d29(0x180)]=helper[_0x183d29(0x165)](this[_0x183d29(0x17d)][_0x183d29(0x18e)]);continue;case'1':this[_0x183d29(0x156)][_0x183d29(0x1bd)]=helper[_0x183d29(0x150)](_0x1805d9,[_0x326cd2[_0x183d29(0x164)],_0x326cd2[_0x183d29(0x1ae)],_0x326cd2[_0x183d29(0x174)]]);continue;case'2':this[_0x183d29(0x156)][_0x183d29(0x189)]=_0x326cd2['xlXbI'](require,_0x326cd2[_0x183d29(0x19f)])[_0x183d29(0x1b5)]({...this[_0x183d29(0x17d)],'capability':this[_0x183d29(0x1ad)]||{}},this,testhubUtils[_0x183d29(0x153)]());continue;case'3':this[_0x183d29(0x156)][_0x183d29(0x1b9)]=(_0x1805d9['projectConfig']?_0x1805d9[_0x183d29(0x1b8)][_0x183d29(0x1b9)]:_0x1805d9[_0x183d29(0x1b9)])||0x0;continue;case'4':this[_0x183d29(0x156)][_0x183d29(0x179)]=helper[_0x183d29(0x150)](_0x1805d9,[_0x326cd2['rJbML'],_0x326cd2[_0x183d29(0x1ae)],_0x326cd2[_0x183d29(0x1b7)]]);continue;case'5':this[_0x183d29(0x156)][_0x183d29(0x159)]=async()=>{const _0x68db9b=_0x183d29;await this[_0x68db9b(0x156)][_0x68db9b(0x177)][_0x68db9b(0x169)](_0x326cd2[_0x68db9b(0x15f)]);};continue;case'6':helper['isTrue'](this[_0x183d29(0x17d)][_0x183d29(0x195)])?this[_0x183d29(0x156)]['sessionNameProvided']=!![]:this['global'][_0x183d29(0x17a)]=![];continue;case'7':this[_0x183d29(0x156)][_0x183d29(0x184)]=helper['nestedKeyValue'](_0x1805d9,[_0x326cd2[_0x183d29(0x164)],_0x326cd2['zgjCS'],_0x326cd2[_0x183d29(0x187)]]);continue;case'8':this[_0x183d29(0x156)][_0x183d29(0x1a9)]=[];continue;case'9':this[_0x183d29(0x156)][_0x183d29(0x194)]=helper[_0x183d29(0x150)](this[_0x183d29(0x17d)],[_0x326cd2[_0x183d29(0x176)],this[_0x183d29(0x156)]['browserstackPlatformIndex']])||{};continue;}break;}}}async[a18_0x33f181(0x171)](){const _0x29ebf4=a18_0x33f181;_seleniumWebdriver2&&(await helper[_0x29ebf4(0x1a5)](this['global'][_0x29ebf4(0x18a)]),this[_0x29ebf4(0x156)][_0x29ebf4(0x189)][_0x29ebf4(0x183)]=originalBuilder),await RequestQueueHandler[_0x29ebf4(0x1ac)]()['shutdown']();}async[a18_0x33f181(0x14a)](){}async[a18_0x33f181(0x16e)](_0x768837,_0x41f16a){const _0x458ffc=a18_0x33f181,_0x5bb557={};_0x5bb557[_0x458ffc(0x1bb)]=function(_0x50c4c4,_0x53840e){return _0x50c4c4===_0x53840e;},_0x5bb557[_0x458ffc(0x198)]=_0x458ffc(0x192),_0x5bb557[_0x458ffc(0x1b4)]=function(_0x5150a2,_0x4974d6){return _0x5150a2===_0x4974d6;},_0x5bb557[_0x458ffc(0x19a)]=_0x458ffc(0x1bf),_0x5bb557['NdJjT']='test_done',_0x5bb557[_0x458ffc(0x172)]=_0x458ffc(0x162),_0x5bb557[_0x458ffc(0x1b0)]=_0x458ffc(0x17f),_0x5bb557[_0x458ffc(0x191)]=function(_0x44aa21,_0x2f2ca6){return _0x44aa21===_0x2f2ca6;},_0x5bb557[_0x458ffc(0x1b1)]=_0x458ffc(0x171);const _0x2e7729=_0x5bb557,{name:_0x2a31e9}=_0x768837;if(_0x2e7729[_0x458ffc(0x1bb)](_0x2a31e9,_0x2e7729[_0x458ffc(0x198)])){this[_0x458ffc(0x156)][_0x458ffc(0x151)]=_0x768837['test'];if(_0x2e7729[_0x458ffc(0x1b4)](this[_0x458ffc(0x156)][_0x458ffc(0x14f)],!![])){const _0x4edceb=_0x768837[_0x458ffc(0x14e)]['name'];logger[_0x458ffc(0x16f)](_0x458ffc(0x182)+_0x4edceb),_0x768837[_0x458ffc(0x14e)]['mode']=_0x2e7729[_0x458ffc(0x19a)];}}if(this[_0x458ffc(0x166)]&&_0x2e7729[_0x458ffc(0x1bb)](_0x2a31e9,_0x2e7729[_0x458ffc(0x1ba)]))try{const _0x1be494=_0x768837[_0x458ffc(0x14e)][_0x458ffc(0x161)][_0x458ffc(0x190)](_0x2e7729[_0x458ffc(0x172)]),_0x634a89=_0x768837[_0x458ffc(0x14e)][_0x458ffc(0x16b)];await this['failFast'][_0x458ffc(0x14d)](_0x1be494,_0x634a89);const _0x2765de=await this['failFast'][_0x458ffc(0x1ab)]();_0x2e7729[_0x458ffc(0x1b4)](this[_0x458ffc(0x156)]['failFastActive'],![])&&_0x2e7729['DBYOv'](_0x2765de,!![])&&(this['global'][_0x458ffc(0x14f)]=!![]);}catch(_0x3f5729){logger[_0x458ffc(0x1b6)](_0x2e7729[_0x458ffc(0x1b0)],_0x3f5729[_0x458ffc(0x18b)]);}_0x2e7729[_0x458ffc(0x191)](_0x2a31e9,_0x2e7729[_0x458ffc(0x1b1)])&&(this[_0x458ffc(0x166)]&&this[_0x458ffc(0x166)][_0x458ffc(0x159)]());}}module['exports']=CustomEnvironment;