const a119_0x4f196a=a119_0x387c;(function(_0x2938b6,_0x241328){const _0x1ed937=a119_0x387c,_0x5167a2=_0x2938b6();while(!![]){try{const _0x5cdd34=parseInt(_0x1ed937(0x1e0))/0x1+-parseInt(_0x1ed937(0x1ae))/0x2*(-parseInt(_0x1ed937(0x1cf))/0x3)+-parseInt(_0x1ed937(0x1eb))/0x4+-parseInt(_0x1ed937(0x1e9))/0x5+-parseInt(_0x1ed937(0x216))/0x6+parseInt(_0x1ed937(0x208))/0x7+parseInt(_0x1ed937(0x1de))/0x8*(parseInt(_0x1ed937(0x207))/0x9);if(_0x5cdd34===_0x241328)break;else _0x5167a2['push'](_0x5167a2['shift']());}catch(_0x434df1){_0x5167a2['push'](_0x5167a2['shift']());}}}(a119_0x40e9,0x6ab37));const {BATCH_SIZE,BATCH_INTERVAL,DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS}=require('./constants'),{nodeRequest,debug,trace,sleep,getDefaultHeaders}=require(a119_0x4f196a(0x202)),{nestedKeyValue}=require(a119_0x4f196a(0x1b7)),util=require(a119_0x4f196a(0x203)),constants=require(a119_0x4f196a(0x1dc));function a119_0x387c(_0x3f41bf,_0x5e400e){const _0x40e9bc=a119_0x40e9();return a119_0x387c=function(_0x387c02,_0x4f8adc){_0x387c02=_0x387c02-0x1ac;let _0x35cfee=_0x40e9bc[_0x387c02];return _0x35cfee;},a119_0x387c(_0x3f41bf,_0x5e400e);}function a119_0x40e9(){const _0x34326c=['join','format','exports','error','\x20event\x20successful\x20for\x20events\x20','data','46946KDDjXr','REMOVING','RESETTING','uuid','uploadAttachmentUrl','Exception\x20in\x20logging\x20batch\x20events\x20--\x20','emxbL','proceedWithData','sqFxK','../helper','HookRunFinished','iacin','pollEventBatchInterval','event_type','UNKlW','HookRunStarted','pVkJV','\x20REQUEST\x20TO\x20','WkZvG','TEST_SCREENSHOT','Ppyru','uploadPending','api/v1/batch','OnEnx','EXCEPTION\x20IN\x20','length','test_run','PuGyg','started','CYZRN','BNnsg','eventUrl','TestRunStarted','87kBliGq','vwncx','Qhqwz','pendingUploads','response','hMgAG','rZweZ','hook_run','startEventBatchPolling','\x20:\x20','api/v1/screenshots','VsqCe','Batch\x20event\x20length\x20has\x20increased\x20maximum\x20batch\x20size.\x20Sending\x20events..','../../bin/utils/constants','statusText','187192hkQKkd','Processing\x20batch\x20events\x20for\x20','540444bHUtQM','rAJXE','Processing\x20events.\x20Queue\x20Length\x20-\x20','proceedWithUrl','kind','batchAndPostEvents','.\x20Request\x20Size\x20-\x20','queue','includes','3460710jcsXuN','sslRd','2382788PWouzr','resetEventBatchPolling','message','FPNjF','shouldProceed','tNuYi','Interval-Queue','BATCH_EVENT_TYPES','WytTu','map','start','LEWBN','POST','piCWJ','iJHSe','ixijg','instance','upload-attachments','TestRunSkipped','shutdown','\x20--\x20','QdooQ','oYsAq','./utils','util','TestRunFinished','cKLyo','HAMeF','45sDrLxr','6042932LhAnfE','splice','screenshotEventUrl','byteLength','AiBhw','removeEventBatchPolling','VwaOg','nLUJE','BXTyB','add','Remaining\x20Queue\x20Length\x20-\x20','logs','fCJqk','LogCreated','2859276efwBOy','TEST_REPORTING_ANALYTICS','biZXJ','SIpzM'];a119_0x40e9=function(){return _0x34326c;};return a119_0x40e9();}class RequestQueueHandler{static [a119_0x4f196a(0x1fb)];[a119_0x4f196a(0x1d2)]=0x0;constructor(){const _0x47ae4c=a119_0x4f196a,_0x98f39={};_0x98f39[_0x47ae4c(0x205)]='2|0|5|1|4|3|6',_0x98f39[_0x47ae4c(0x1d1)]=_0x47ae4c(0x1d9),_0x98f39[_0x47ae4c(0x1d5)]=_0x47ae4c(0x215),_0x98f39[_0x47ae4c(0x210)]='CBTSessionCreated',_0x98f39[_0x47ae4c(0x1da)]=_0x47ae4c(0x204),_0x98f39[_0x47ae4c(0x201)]=_0x47ae4c(0x1fd),_0x98f39['SIpzM']=_0x47ae4c(0x1b8),_0x98f39['kpbaZ']=_0x47ae4c(0x1ce),_0x98f39[_0x47ae4c(0x1cb)]=_0x47ae4c(0x1bd),_0x98f39[_0x47ae4c(0x218)]=_0x47ae4c(0x1fc),_0x98f39[_0x47ae4c(0x1d0)]=_0x47ae4c(0x1c4);const _0x466b07=_0x98f39,_0x373ab9=_0x466b07[_0x47ae4c(0x205)]['split']('|');let _0x262bbe=0x0;while(!![]){switch(_0x373ab9[_0x262bbe++]){case'0':this[_0x47ae4c(0x1ca)]=![];continue;case'1':this['screenshotEventUrl']=_0x466b07[_0x47ae4c(0x1d1)];continue;case'2':this[_0x47ae4c(0x1e7)]=[];continue;case'3':this[_0x47ae4c(0x1f2)]=[_0x466b07['rZweZ'],_0x466b07[_0x47ae4c(0x210)],_0x466b07[_0x47ae4c(0x1da)],_0x466b07[_0x47ae4c(0x201)],_0x466b07[_0x47ae4c(0x219)],_0x466b07['kpbaZ'],_0x466b07[_0x47ae4c(0x1cb)]];continue;case'4':this[_0x47ae4c(0x1b2)]=_0x466b07['biZXJ'];continue;case'5':this['eventUrl']=_0x466b07[_0x47ae4c(0x1d0)];continue;case'6':this[_0x47ae4c(0x1ba)]=null;continue;}break;}}static['getInstance'](){const _0x3c2386=a119_0x4f196a;return!RequestQueueHandler['instance']&&(RequestQueueHandler[_0x3c2386(0x1fb)]=new RequestQueueHandler()),RequestQueueHandler[_0x3c2386(0x1fb)];}[a119_0x4f196a(0x1f5)]=()=>{!this['started']&&(this['started']=!![],this['startEventBatchPolling']());};[a119_0x4f196a(0x211)]=_0x5887b7=>{const _0x2ed79c=a119_0x4f196a,_0x2b5212={'PuGyg':function(_0x4ba51b,_0x491474){return _0x4ba51b===_0x491474;},'HAMeF':_0x2ed79c(0x1c1),'hMgAG':function(_0x161e0e,_0x331961){return _0x161e0e>_0x331961;},'nFOYB':'TEST_ATTACHMENT','emxbL':function(_0x24ec22,_0x16ebeb){return _0x24ec22!==_0x16ebeb;},'Ppyru':'TestRunFinished','tNuYi':function(_0x17ace8,_0x3da151){return _0x17ace8(_0x3da151);},'WLeAj':_0x2ed79c(0x1db)};if(this['BATCH_EVENT_TYPES'][_0x2ed79c(0x1e8)](_0x5887b7[_0x2ed79c(0x1bb)])){if(_0x5887b7[_0x2ed79c(0x213)]&&_0x5887b7[_0x2ed79c(0x213)][0x0]&&_0x2b5212['PuGyg'](_0x5887b7[_0x2ed79c(0x213)][0x0]['kind'],_0x2b5212[_0x2ed79c(0x206)])){const _0xaa0ff7={};return _0xaa0ff7[_0x2ed79c(0x1ef)]=!![],_0xaa0ff7[_0x2ed79c(0x1b5)]=[_0x5887b7],_0xaa0ff7[_0x2ed79c(0x1e3)]=this[_0x2ed79c(0x20a)],_0xaa0ff7;}if(_0x5887b7[_0x2ed79c(0x213)]&&_0x2b5212[_0x2ed79c(0x1d4)](_0x5887b7[_0x2ed79c(0x213)][_0x2ed79c(0x1c7)],0x0)&&_0x2b5212[_0x2ed79c(0x1c9)](_0x5887b7[_0x2ed79c(0x213)][0x0][_0x2ed79c(0x1e4)],_0x2b5212['nFOYB'])&&_0x2b5212[_0x2ed79c(0x1b4)](_0x5887b7[_0x2ed79c(0x1bb)],_0x2b5212[_0x2ed79c(0x1c2)])){const _0x317acd={};return _0x317acd[_0x2ed79c(0x1ef)]=!![],_0x317acd[_0x2ed79c(0x1b5)]=[_0x5887b7],_0x317acd[_0x2ed79c(0x1e3)]=this[_0x2ed79c(0x1b2)],_0x317acd;}this['queue']['push'](_0x5887b7);let _0x156d5c=null;const _0x4d3100=this['shouldProceed']();_0x4d3100&&(_0x2b5212[_0x2ed79c(0x1f0)](trace,_0x2b5212['WLeAj']),_0x156d5c=this['queue']['slice'](0x0,BATCH_SIZE),this[_0x2ed79c(0x1e7)][_0x2ed79c(0x209)](0x0,BATCH_SIZE),this[_0x2ed79c(0x1ec)]());const _0x56b5d7={};return _0x56b5d7[_0x2ed79c(0x1ef)]=_0x4d3100,_0x56b5d7[_0x2ed79c(0x1b5)]=_0x156d5c,_0x56b5d7[_0x2ed79c(0x1e3)]=this[_0x2ed79c(0x1cd)],_0x56b5d7;}const _0x1b10c0={};return _0x1b10c0[_0x2ed79c(0x1ef)]=!![],_0x1b10c0;};[a119_0x4f196a(0x1fe)]=async()=>{const _0x8f637d=a119_0x4f196a,_0x3f85b8={'AiBhw':_0x8f637d(0x1af),'NfalS':function(_0x169280,_0x1f949c){return _0x169280>_0x1f949c;},'nLUJE':'Shutdown-Queue','zLuVq':function(_0x3880ca,_0x261644){return _0x3880ca>_0x261644;},'LEWBN':function(_0x4fff5e,_0x3b8ea9){return _0x4fff5e(_0x3b8ea9);}};await this[_0x8f637d(0x1c3)](),this[_0x8f637d(0x20d)](_0x3f85b8[_0x8f637d(0x20c)]);while(_0x3f85b8['NfalS'](this[_0x8f637d(0x1e7)][_0x8f637d(0x1c7)],0x0)){const _0x349465=this[_0x8f637d(0x1e7)]['slice'](0x0,BATCH_SIZE);this['queue']['splice'](0x0,BATCH_SIZE),await this['batchAndPostEvents'](this[_0x8f637d(0x1cd)],_0x3f85b8[_0x8f637d(0x20f)],_0x349465);}_0x3f85b8['zLuVq'](this[_0x8f637d(0x1d2)],0x0)&&_0x3f85b8[_0x8f637d(0x1f6)](debug,'Shutting\x20down\x20request\x20batcher\x20with\x20pending\x20uploads\x20still\x20in\x20queue.\x20Remaining\x20uploads\x20'+this[_0x8f637d(0x1d2)]);};[a119_0x4f196a(0x1e5)]=async(_0x28a61c,_0x496924,_0x583f90)=>{const _0x5586e5=a119_0x4f196a,_0x52f105={'iJHSe':function(_0x2db4d6,_0x37106a){return _0x2db4d6(_0x37106a);},'sslRd':'utf8','BNnsg':function(_0x30cf49,_0x38c430){return _0x30cf49(_0x38c430);},'iacin':function(_0x51ab21){return _0x51ab21();},'EDKKA':function(_0x53dea5,_0x25b8de,_0x21f754,_0x48b6ce,_0x158e56){return _0x53dea5(_0x25b8de,_0x21f754,_0x48b6ce,_0x158e56);},'WytTu':_0x5586e5(0x1f7),'VwaOg':function(_0x5287fa,_0x498dbd){return _0x5287fa(_0x498dbd);},'TdPzn':function(_0x4d86ef,_0xbf6de8){return _0x4d86ef-_0xbf6de8;},'UNKlW':function(_0x32932a,_0x3b4c79){return _0x32932a-_0x3b4c79;}};let _0x45680d='';try{_0x45680d=_0x583f90[_0x5586e5(0x1f4)](_0x786dcb=>'\x27'+_0x786dcb[_0x5586e5(0x1bb)]+'\x27:'+(nestedKeyValue(_0x786dcb,[_0x5586e5(0x1c8),_0x5586e5(0x1b1)])||nestedKeyValue(_0x786dcb,[_0x5586e5(0x1d6),_0x5586e5(0x1b1)])))[_0x5586e5(0x21a)](','),_0x52f105['iJHSe'](debug,_0x5586e5(0x1df)+_0x496924+_0x5586e5(0x1e6)+Buffer[_0x5586e5(0x20b)](util[_0x5586e5(0x21b)]('%j',_0x583f90),_0x52f105[_0x5586e5(0x1ea)])+'\x20bytes.\x20Events\x20are\x20'+_0x45680d);}catch(_0x59e0ec){_0x52f105[_0x5586e5(0x1cc)](debug,_0x5586e5(0x1b3)+util[_0x5586e5(0x21b)](_0x59e0ec)+'}');}const _0x237f5b={'headers':_0x52f105[_0x5586e5(0x1b9)](getDefaultHeaders)};try{const _0x55b42b=await _0x52f105['EDKKA'](nodeRequest,_0x52f105[_0x5586e5(0x1f3)],_0x28a61c,_0x583f90,_0x237f5b);if(_0x55b42b['data'][_0x5586e5(0x21d)]){const _0x330654={};_0x330654[_0x5586e5(0x1ed)]=_0x55b42b[_0x5586e5(0x1ad)][_0x5586e5(0x21d)];throw _0x330654;}else _0x52f105['VwaOg'](debug,_0x496924+_0x5586e5(0x1ac)+_0x45680d+_0x5586e5(0x1ff)+util['format']('%j',_0x55b42b[_0x5586e5(0x1ad)])),this['pendingUploads']=Math['max'](0x0,_0x52f105['TdPzn'](this[_0x5586e5(0x1d2)],_0x583f90['length']));}catch(_0x58c481){_0x58c481[_0x5586e5(0x1d3)]?_0x52f105[_0x5586e5(0x1f9)](debug,_0x5586e5(0x1c6)+_0x496924+'\x20REQUEST\x20TO\x20'+constants[_0x5586e5(0x217)]+_0x5586e5(0x1d8)+_0x58c481[_0x5586e5(0x1d3)]['status']+'\x20'+_0x58c481[_0x5586e5(0x1d3)][_0x5586e5(0x1dd)]+'\x20'+util[_0x5586e5(0x21b)]('%j',_0x58c481[_0x5586e5(0x1d3)])):_0x52f105[_0x5586e5(0x20e)](debug,'EXCEPTION\x20IN\x20'+_0x496924+_0x5586e5(0x1bf)+constants[_0x5586e5(0x217)]+_0x5586e5(0x1d8)+(_0x58c481[_0x5586e5(0x1ed)]||_0x58c481)),this['pendingUploads']=Math['max'](0x0,_0x52f105[_0x5586e5(0x1bc)](this[_0x5586e5(0x1d2)],_0x583f90['length']));}};['startEventBatchPolling']=()=>{const _0x332bad=a119_0x4f196a,_0x52141d={'PNHTf':function(_0x275674,_0x505ce4){return _0x275674>_0x505ce4;},'WkZvG':function(_0x141795,_0x5a9986){return _0x141795(_0x5a9986);},'piCWJ':_0x332bad(0x1f1),'rAJXE':function(_0x162f97,_0x49802b,_0x31ac2c){return _0x162f97(_0x49802b,_0x31ac2c);}};this[_0x332bad(0x1ba)]=_0x52141d[_0x332bad(0x1e1)](setInterval,async()=>{const _0x2a0332=_0x332bad;if(_0x52141d['PNHTf'](this[_0x2a0332(0x1e7)][_0x2a0332(0x1c7)],0x0)){_0x52141d[_0x2a0332(0x1c0)](trace,_0x2a0332(0x1e2)+this[_0x2a0332(0x1e7)][_0x2a0332(0x1c7)]);const _0x5e14d8=this[_0x2a0332(0x1e7)]['slice'](0x0,BATCH_SIZE);this[_0x2a0332(0x1e7)]['splice'](0x0,BATCH_SIZE),await this[_0x2a0332(0x1e5)](this[_0x2a0332(0x1cd)],_0x52141d[_0x2a0332(0x1f8)],_0x5e14d8),_0x52141d[_0x2a0332(0x1c0)](trace,_0x2a0332(0x212)+this[_0x2a0332(0x1e7)]['length']);}},BATCH_INTERVAL);};[a119_0x4f196a(0x1ec)]=()=>{const _0xfdd3e=a119_0x4f196a,_0x472ec6={};_0x472ec6[_0xfdd3e(0x200)]=_0xfdd3e(0x1b0);const _0x1872ac=_0x472ec6;this[_0xfdd3e(0x20d)](_0x1872ac['QdooQ']),this[_0xfdd3e(0x1d7)]();};[a119_0x4f196a(0x20d)]=_0xcb95f6=>{const _0x1b0560=a119_0x4f196a,_0x13d5d7={'srDUc':function(_0x4a4396,_0x514686){return _0x4a4396(_0x514686);},'FPNjF':function(_0x33cb82,_0x470d34){return _0x33cb82===_0x470d34;},'ixijg':_0x1b0560(0x1af)};this[_0x1b0560(0x1ba)]&&(_0x13d5d7['srDUc'](clearInterval,this[_0x1b0560(0x1ba)]),this[_0x1b0560(0x1ba)]=null,_0x13d5d7[_0x1b0560(0x1ee)](_0xcb95f6,_0x13d5d7[_0x1b0560(0x1fa)])&&(this[_0x1b0560(0x1ca)]=![]));};[a119_0x4f196a(0x1ef)]=()=>{const _0xb6dbad=a119_0x4f196a,_0x544a0f={};_0x544a0f[_0xb6dbad(0x1be)]=function(_0x1b9eb3,_0x45e8e1){return _0x1b9eb3>=_0x45e8e1;};const _0x52c56e=_0x544a0f;return _0x52c56e[_0xb6dbad(0x1be)](this[_0xb6dbad(0x1e7)][_0xb6dbad(0x1c7)],BATCH_SIZE);};async[a119_0x4f196a(0x1c3)](_0x56330f=DEFAULT_WAIT_TIMEOUT_FOR_PENDING_UPLOADS,_0x390ec6=DEFAULT_WAIT_INTERVAL_FOR_PENDING_UPLOADS){const _0x124e2b=a119_0x4f196a,_0x2286aa={'OnEnx':function(_0x4fea79,_0x1fe1c5){return _0x4fea79<=_0x1fe1c5;},'sqFxK':function(_0x25660d,_0x43638c){return _0x25660d(_0x43638c);},'fCJqk':function(_0x28c8f1,_0x242587){return _0x28c8f1-_0x242587;}};if(_0x2286aa[_0x124e2b(0x1c5)](this[_0x124e2b(0x1d2)],0x0)||_0x2286aa[_0x124e2b(0x1c5)](_0x56330f,0x0))return;return await _0x2286aa[_0x124e2b(0x1b6)](sleep,_0x390ec6),this[_0x124e2b(0x1c3)](_0x2286aa[_0x124e2b(0x214)](_0x56330f,_0x390ec6));}}module[a119_0x4f196a(0x21c)]=RequestQueueHandler;