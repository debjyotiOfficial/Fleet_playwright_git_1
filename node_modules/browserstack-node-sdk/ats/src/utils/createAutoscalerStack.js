const a26_0x138deb=a26_0x5ee1;(function(_0x39245a,_0x465e86){const _0x31e678=a26_0x5ee1,_0x326f60=_0x39245a();while(!![]){try{const _0x3472ae=parseInt(_0x31e678(0x15b))/0x1*(parseInt(_0x31e678(0x15a))/0x2)+parseInt(_0x31e678(0x157))/0x3*(-parseInt(_0x31e678(0x15e))/0x4)+parseInt(_0x31e678(0x149))/0x5+parseInt(_0x31e678(0x165))/0x6+-parseInt(_0x31e678(0x171))/0x7*(parseInt(_0x31e678(0x167))/0x8)+parseInt(_0x31e678(0x14d))/0x9*(-parseInt(_0x31e678(0x169))/0xa)+parseInt(_0x31e678(0x153))/0xb;if(_0x3472ae===_0x465e86)break;else _0x326f60['push'](_0x326f60['shift']());}catch(_0x586005){_0x326f60['push'](_0x326f60['shift']());}}}(a26_0x3872,0x64d35));const fs=require('fs'),path=require(a26_0x138deb(0x143)),yaml=require('js-yaml'),{CLOUDFORMATION_SCHEMA}=require(a26_0x138deb(0x16a)),Promise=require('bluebird'),AWS=require(a26_0x138deb(0x14a))[a26_0x138deb(0x14f)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require('../config/constants'),{logger}=require(a26_0x138deb(0x150));function a26_0x3872(){const _0x5182ae=['StackId','TemplateBody','readFileAsync','4639920pCDGiP','Parameters','2984iCdiGq','OZezx','110bywwCd','js-yaml-cloudformation-schema','PLjNa','Resources','createAutoscalerStack','Key','Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','Capabilities','13895VWHtxR','ONXST','waitFor','stackCreateComplete','path','OnFailure','push','PYYkM','StackName','promise','2276925zxTSGu','./AWSUtils','autoscaler-role-creation.yaml','join','485451xfPctN','aZtCN','awsObj','../config/logger','stringify','DELETE','6370001ljILWE','Tags','kgTOM','templates','128946lXvYky','toString','utf-8','10mXWcuc','56555luWPJc','Properties','bBDPu','32PZlAjs','schema','IkRdx','valueOf'];a26_0x3872=function(){return _0x5182ae;};return a26_0x3872();}function a26_0x5ee1(_0xb4eb04,_0x22bdb6){const _0x387261=a26_0x3872();return a26_0x5ee1=function(_0x5ee1ac,_0x183f5e){_0x5ee1ac=_0x5ee1ac-0x142;let _0x390374=_0x387261[_0x5ee1ac];return _0x390374;},a26_0x5ee1(_0xb4eb04,_0x22bdb6);}Promise['promisifyAll'](fs);const addAutoscalerTags=async(_0x1c8b50,_0x110e1c,_0x1751fe)=>{const _0x8cdc71=a26_0x138deb;for(const _0x2cd6fb in _0x1c8b50[_0x8cdc71(0x16c)]){_0x1c8b50['Resources'][_0x2cd6fb][_0x8cdc71(0x15c)]&&_0x1c8b50[_0x8cdc71(0x16c)][_0x2cd6fb][_0x8cdc71(0x15c)]['Tags']&&_0x1c8b50[_0x8cdc71(0x16c)][_0x2cd6fb][_0x8cdc71(0x15c)][_0x8cdc71(0x154)][_0x8cdc71(0x145)](..._0x1751fe);}};exports[a26_0x138deb(0x16d)]=async _0x524636=>{const _0x14a24b=a26_0x138deb,_0x3f79d2={'bBDPu':'browserstack:cluster','PLjNa':'browserstack:creationDate','aZtCN':'2010-05-15','hlJiw':_0x14a24b(0x156),'rxpvu':_0x14a24b(0x14b),'IkRdx':_0x14a24b(0x159),'PYYkM':function(_0x10d6f5,_0x4bd881,_0x51698b,_0x72dbee){return _0x10d6f5(_0x4bd881,_0x51698b,_0x72dbee);},'OZezx':_0x14a24b(0x152),'gFhfQ':'ClusterName','ONXST':'CAPABILITY_NAMED_IAM','EssJr':_0x14a24b(0x16f),'kgTOM':_0x14a24b(0x142)},_0x1a1a15=COMMON_HST_TAGS,_0x56a582={};_0x56a582[_0x14a24b(0x16e)]=_0x3f79d2[_0x14a24b(0x15d)],_0x56a582['Value']=_0x524636,_0x1a1a15[_0x14a24b(0x145)](_0x56a582),_0x1a1a15[_0x14a24b(0x145)]({'Key':_0x3f79d2[_0x14a24b(0x16b)],'Value':new Date()[_0x14a24b(0x161)]()[_0x14a24b(0x158)]()});const _0x2553af={};_0x2553af['apiVersion']=_0x3f79d2[_0x14a24b(0x14e)];const _0x37d635=new AWS['CloudFormation'](_0x2553af),_0x15aed8=await fs[_0x14a24b(0x164)](path[_0x14a24b(0x14c)](__dirname,'..',_0x3f79d2['hlJiw'],_0x3f79d2['rxpvu']),_0x3f79d2[_0x14a24b(0x160)]),_0x5541ee={};_0x5541ee[_0x14a24b(0x15f)]=CLOUDFORMATION_SCHEMA;const _0x5a4387=yaml['load'](_0x15aed8,_0x5541ee);_0x3f79d2[_0x14a24b(0x146)](addAutoscalerTags,_0x5a4387,_0x524636,_0x1a1a15);const _0x16c277=JSON[_0x14a24b(0x151)](_0x5a4387),_0x4e2024={};_0x4e2024['StackName']=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x524636,_0x4e2024[_0x14a24b(0x144)]=_0x3f79d2[_0x14a24b(0x168)],_0x4e2024[_0x14a24b(0x163)]=_0x16c277,_0x4e2024[_0x14a24b(0x166)]=[{'ParameterKey':_0x3f79d2['gFhfQ'],'ParameterValue':_0x524636}],_0x4e2024[_0x14a24b(0x170)]=[_0x3f79d2[_0x14a24b(0x172)]],_0x4e2024['Tags']=_0x1a1a15;const _0x4f617e=_0x4e2024,_0x285d6d=await _0x37d635['createStack'](_0x4f617e)[_0x14a24b(0x148)]();logger['debug'](_0x3f79d2['EssJr']);const _0xad7e55={};return _0xad7e55[_0x14a24b(0x147)]=_0x285d6d[_0x14a24b(0x162)],_0x37d635[_0x14a24b(0x173)](_0x3f79d2[_0x14a24b(0x155)],_0xad7e55)[_0x14a24b(0x148)]();};